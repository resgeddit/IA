(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(74280)}])},74280:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return tn},default:function(){return tl}});var r,s,l=a(85893),n=a(67294),i=a(88767),o=a(61162),c=a(9008),d=a.n(c),u=a(24552),x=()=>{let{t:e}=(0,o.$G)("chat");return{getModelsError:(0,n.useMemo)(()=>t=>t?{title:e("Error fetching models."),code:t.status||"unknown",messageLines:t.statusText?[t.statusText]:[e("Make sure your OpenAI API key is set in the bottom left of the sidebar."),e("If you completed this step, OpenAI may be experiencing issues.")]}:null,[e])}};let m=()=>{let e=async(e,t,a)=>{let r=(null==t?void 0:t.params)?"".concat(e).concat(t.params):e,s=(null==t?void 0:t.body)?t.body instanceof FormData?{...t,body:t.body}:{...t,body:JSON.stringify(t.body)}:t,l={...(null==t?void 0:t.headers)?t.headers:(null==t?void 0:t.body)&&t.body instanceof FormData?{}:{"Content-type":"application/json"}};return fetch(r,{...s,headers:l,signal:a}).then(e=>{if(!e.ok)throw e;let t=e.headers.get("content-type"),a=e.headers.get("content-disposition");return e.headers,t&&((null==t?void 0:t.indexOf("application/json"))!==-1||(null==t?void 0:t.indexOf("text/plain"))!==-1)?e.json():(null==a?void 0:a.indexOf("attachment"))!==-1?e.blob():e}).catch(async e=>{let t=e.headers.get("content-type");throw t&&(null==t?void 0:t.indexOf("application/problem+json"))!==-1?await e.json():e})};return{get:async(t,a)=>e(t,{...a,method:"get"}),post:async(t,a)=>e(t,{...a,method:"post"}),put:async(t,a)=>e(t,{...a,method:"put"}),patch:async(t,a)=>e(t,{...a,method:"patch"}),delete:async(t,a)=>e(t,{...a,method:"delete"})}};var h=()=>(m(),{getModels:(0,n.useCallback)(()=>Promise.resolve([{id:"gpt-3.5-turbo-instruct",name:"HackerGPT"},{id:"gpt-4",name:"GPT-4"}]),[])});(r=s||(s={})).HackerGPT_3_5="gpt-3.5-turbo-instruct",r.GPT_4="gpt-4";let g={"gpt-3.5-turbo-instruct":{id:"gpt-3.5-turbo-instruct",name:"HackerGPT",maxLength:12e3,tokenLimit:4e3},"gpt-4":{id:"gpt-4",name:"GPT-4",maxLength:24e3,tokenLimit:8e3}},p=e=>{let t=e;return t.model||(t={...t,model:t.model||g[s.HackerGPT_3_5]}),t.messages||(t={...t,messages:t.messages||[]}),t},f=e=>Array.isArray(e)?e.reduce((e,t)=>{try{t.model||(t.model=g[s.HackerGPT_3_5]),t.messages||(t.messages=[]),e.push(t)}catch(e){console.warn("error while cleaning conversations' history. Removing culprit",e)}return e},[]):(console.warn("history is not an array. Returning an empty array."),[]),b=(e,t)=>{let a=t.map(t=>t.id===e.id?e:t);return v(e),w(a),{single:e,all:a}},v=e=>{try{localStorage.setItem("selectedConversation",JSON.stringify(e))}catch(e){if(e instanceof DOMException&&(22===e.code||"QuotaExceededError"===e.name))console.error("LocalStorage quota exceeded. Clearing selected conversation..."),localStorage.removeItem("selectedConversation");else throw e}},w=e=>{try{localStorage.setItem("conversationHistory",JSON.stringify(e))}catch(e){if(e instanceof DOMException&&(22===e.code||"QuotaExceededError"===e.name))console.error("LocalStorage quota exceeded. Clearing conversation history..."),localStorage.removeItem("conversationHistory");else throw e}},y="settings",j=()=>{let e={theme:"dark"},t=localStorage.getItem(y);if(t)try{let a=JSON.parse(t);e=Object.assign(e,a)}catch(e){console.error(e)}return e},k=e=>{localStorage.setItem(y,JSON.stringify(e))};var N=a(64398),C=a(39686),S=a(86501);let E=e=>{let{scale:t=1}=e;return(0,l.jsx)(n.Fragment,{children:(0,l.jsx)("svg",{width:189*t,height:194*t,viewBox:"0 0 256 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsxs)("g",{transform:"translate(0.000000,189.000000) scale(0.100000,-0.100000)",className:"fill-current text-[#0a0a0a] dark:text-[#fafafa]",children:[(0,l.jsx)("path",{d:"M1117 2440 c-583 -92 -1007 -580 -1007 -1160 0 -474 292 -906 731 -1083 160 -64 252 -81 444 -81 150 1 181 4 266 26 120 33 235 78 314 125 287 173 464 411 553 742 22 83 25 118 26 261 1 174 -6 226 -51 365 -128 401 -459 700 -876 791 -85 19 -318 27 -400 14z m-282 -415 c83 -48 156 -92 163 -98 20 -16 42 -64 52 -110 l8 -42 1 43 c1 23 -6 59 -14 79 -8 20 -14 37 -13 39 2 1 19 7 38 12 19 6 27 11 18 11 -9 1 -29 -4 -43 -9 -20 -8 -30 -7 -41 5 -9 8 -36 29 -62 47 l-46 32 52 24 c126 57 341 77 502 46 80 -15 186 -48 203 -64 12 -11 -112 -95 -137 -93 -15 1 -16 0 -3 -3 21 -7 20 -3 2 -47 -8 -20 -15 -56 -14 -79 l1 -43 8 42 c12 57 35 99 67 120 42 28 307 182 309 180 1 -1 -13 -84 -30 -185 -33 -188 -43 -214 -97 -254 -14 -11 -47 -23 -75 -27 l-49 -9 48 -1 c55 -1 103 18 138 55 l23 24 28 -42 c16 -24 37 -72 48 -107 18 -58 20 -92 20 -434 0 -357 -1 -372 -21 -415 -13 -26 -38 -54 -62 -70 l-41 -27 -536 0 -536 0 -43 28 c-80 53 -81 58 -81 488 0 350 1 380 20 434 11 32 32 77 47 101 l27 42 34 -29 c44 -39 72 -49 130 -48 l47 1 -49 9 c-108 18 -134 60 -170 270 -15 90 -30 172 -33 183 -3 10 -1 16 3 14 5 -3 77 -45 159 -93z m-144 -217 l14 -63 -37 -55 c-20 -30 -47 -84 -59 -120 -23 -63 -24 -78 -27 -440 l-3 -375 30 -57 c28 -54 28 -57 7 -43 -12 8 -32 28 -45 45 -49 67 -51 87 -51 484 0 403 5 447 56 549 29 57 84 137 94 137 4 0 13 -28 21 -62z m1236 20 c46 -65 82 -141 98 -210 21 -91 22 -786 1 -846 -17 -49 -51 -96 -82 -117 -21 -14 -21 -11 7 42 l30 57 -3 376 c-3 363 -4 377 -27 440 -12 36 -39 90 -59 120 l-37 55 14 63 c8 34 17 62 21 62 4 0 20 -19 37 -42z m-1461 -490 c-20 -16 -43 -43 -52 -59 -14 -28 -12 -27 25 10 23 23 46 41 51 41 6 0 10 -57 10 -150 0 -170 -4 -177 -64 -110 -20 22 -36 37 -36 34 0 -18 45 -76 71 -91 26 -16 40 -43 22 -43 -26 1 -93 53 -120 93 -60 89 -53 190 18 271 21 24 53 50 71 59 32 16 33 15 36 -5 3 -14 -8 -30 -32 -50z m1690 8 c85 -85 96 -186 31 -283 -27 -40 -94 -92 -119 -93 -19 0 -5 27 21 43 26 15 71 73 71 91 0 3 -16 -12 -36 -34 -60 -67 -64 -60 -64 110 0 93 4 150 10 150 6 0 28 -18 51 -41 37 -37 39 -38 24 -10 -8 17 -31 43 -50 58 -21 16 -35 37 -35 50 0 33 37 18 96 -41z m-1081 -865 c0 -87 1 -94 25 -110 42 -30 101 -45 180 -45 79 0 138 15 180 45 24 16 25 23 25 110 0 65 4 94 13 96 9 4 12 -16 12 -75 l0 -79 68 -5 c71 -5 141 -31 205 -75 20 -14 37 -31 37 -38 0 -7 -21 -23 -46 -34 l-46 -22 -47 44 c-26 24 -57 50 -70 56 -37 20 -101 41 -101 33 0 -5 16 -14 36 -21 20 -7 62 -38 93 -68 l56 -56 -35 -14 c-110 -47 -179 -57 -380 -57 -201 0 -270 10 -380 57 l-35 14 56 56 c31 30 73 61 93 68 20 7 36 16 36 21 0 8 -64 -13 -101 -33 -13 -6 -44 -32 -70 -56 l-47 -44 -46 22 c-25 11 -46 27 -46 34 0 7 17 24 38 38 63 44 133 70 204 75 l68 5 0 79 c0 59 3 79 13 75 8 -2 12 -31 12 -96z m90 69 c28 -10 41 -19 30 -19 -21 0 -108 37 -90 38 6 1 33 -8 60 -19z m260 -1 c-22 -10 -49 -18 -60 -18 -11 0 -1 8 25 19 59 24 86 24 35 -1z m-122 -6 c-13 -2 -33 -2 -45 0 -13 2 -3 4 22 4 25 0 35 -2 23 -4z m-112 -51 c-14 -5 -79 17 -86 28 -3 4 18 1 46 -8 28 -9 46 -18 40 -20z m269 32 c0 -8 -67 -34 -87 -33 -13 0 39 24 85 38 1 1 2 -1 2 -5z m-223 -20 c-3 -3 -12 -4 -19 -1 -8 3 -5 6 6 6 11 1 17 -2 13 -5z m110 0 c-3 -3 -12 -4 -19 -1 -8 3 -5 6 6 6 11 1 17 -2 13 -5z m-182 -44 c28 -10 41 -19 30 -19 -21 0 -108 37 -90 38 6 1 33 -8 60 -19z m260 -1 c-22 -10 -49 -18 -60 -18 -11 0 -1 8 25 19 59 24 86 24 35 -1z m-122 -6 c-13 -2 -33 -2 -45 0 -13 2 -3 4 22 4 25 0 35 -2 23 -4z m-112 -51 c-14 -5 -79 17 -86 28 -3 4 18 1 46 -8 28 -9 46 -18 40 -20z m269 32 c0 -8 -67 -34 -87 -33 -13 0 39 24 85 38 1 1 2 -1 2 -5z m-223 -20 c-3 -3 -12 -4 -19 -1 -8 3 -5 6 6 6 11 1 17 -2 13 -5z m110 0 c-3 -3 -12 -4 -19 -1 -8 3 -5 6 6 6 11 1 17 -2 13 -5z m-182 -44 c28 -10 41 -19 30 -19 -21 0 -108 37 -90 38 6 1 33 -8 60 -19z m260 -1 c-22 -10 -49 -18 -60 -18 -11 0 -1 8 25 19 59 24 86 24 35 -1z m-122 -6 c-13 -2 -33 -2 -45 0 -13 2 -3 4 22 4 25 0 35 -2 23 -4z"}),(0,l.jsx)("path",{d:"M1118 1963 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),(0,l.jsx)("path",{d:"M1418 1963 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),(0,l.jsx)("path",{d:"M1468 1953 c7 -3 16 -2 19 1 4 3 -2 6 -13 5 -11 0 -14 -3 -6 -6z"}),(0,l.jsx)("path",{d:"M805 1561 c-47 -12 -75 -33 -96 -73 -17 -34 -19 -61 -19 -344 0 -292 1 -308 21 -344 41 -73 20 -70 569 -70 549 0 528 -3 569 70 20 36 21 52 21 345 0 293 -1 309 -21 345 -44 77 -27 75 -549 77 -256 1 -478 -2 -495 -6z m989 -82 l26 -31 0 -303 0 -303 -26 -31 -26 -31 -488 0 -488 0 -26 31 -26 31 0 303 0 303 26 31 26 31 488 0 488 0 26 -31z"}),(0,l.jsx)("path",{d:"M796 1469 l-26 -20 0 -303 c0 -295 1 -303 21 -322 20 -18 43 -19 489 -19 446 0 469 1 489 19 20 19 21 27 21 322 l0 303 -26 20 c-26 21 -37 21 -484 21 -447 0 -458 0 -484 -21z m332 -269 c5 -70 -64 -150 -130 -150 -44 0 -98 29 -119 64 -18 30 -26 106 -12 120 4 3 63 5 132 4 l126 -3 3 -35z m570 -10 c4 -77 -56 -140 -135 -140 -38 0 -89 33 -113 72 -19 32 -27 98 -13 112 4 3 63 5 132 4 l126 -3 3 -45z"})]})})})};var P=a(91259),T=a(42586),z=a(55347),I=a(35566);let Z=e=>"api/chat";var L=e=>{let{size:t="1em",className:a=""}=e;return(0,l.jsxs)("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-spin ".concat(a),height:t,width:t,xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"6"}),(0,l.jsx)("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),(0,l.jsx)("line",{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}),(0,l.jsx)("line",{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}),(0,l.jsx)("line",{x1:"2",y1:"12",x2:"6",y2:"12"}),(0,l.jsx)("line",{x1:"18",y1:"12",x2:"22",y2:"12"}),(0,l.jsx)("line",{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}),(0,l.jsx)("line",{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"})]})},A=a(21223),D=a(33111),_=a(94568),G=a(23461),O=a(63072),H=function(e){let[t,a]=(0,n.useState)(!1),r=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let t=t=>{document.documentElement.scrollTop>1&&(document.documentElement.scrollTop=document.documentElement.scrollTop),r.current&&r.current.contains(t.target)?a(!0):e.current&&e.current.contains(t.target)?a(!0):a(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[e]),{isFocused:t,menuRef:r,setIsFocused:a}},U=e=>{let[t,a]=(0,n.useState)();return(0,n.useEffect)(()=>{let t=()=>{e.current&&a(e.current.style.display)},r=e.current;if(r){t();let e=new MutationObserver(e=>{e.forEach(e=>{"attributes"===e.type&&"style"===e.attributeName&&t()})});return e.observe(r,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}}},[e]),t},M=a(67421),R=a(58857),W=a(14981),F=a(64011),B=()=>{let{t:e}=(0,M.$G)("tool"),{state:{selectedToolId:t,selectedConversation:a},dispatch:r}=(0,n.useContext)(I.ZP),{isPremium:i}=(0,T.X)(),{state:o,dispatch:c}=(0,F.g)(),[d,u]=(0,n.useState)(!1),x=[0,99];(0,n.useEffect)(()=>{(null==a?void 0:a.model.id)&&r({type:"SET_SELECTED_TOOL_ID",payload:null})},[null==a?void 0:a.model.id,r]);let m=l=>{if(t===R.IV.WEBSEARCH&&l!==R.IV.WEBSEARCH){alert(e('To select a different plugin, please first turn off the "Search Web" feature.'));return}if(t===R.IV.ENHANCEDSEARCH&&l!==R.IV.ENHANCEDSEARCH&&"plugins_store"!==l){alert(e('To select a different plugin, please first turn off the "Enhanced Search" feature.'));return}if("none"===l){r({type:"SET_SELECTED_TOOL_ID",payload:null});return}if(l!==R.IV.SUBFINDER&&l!==R.IV.ALTERX&&l!==R.IV.GAU&&l!==R.IV.CYBERCHEF&&"plugins_store"!==l&&(null==a?void 0:a.model.id)!==s.GPT_4){alert(e("This plugin is only available with the GPT-4 model."));return}"plugins_store"===l?u(!0):r({type:"SET_SELECTED_TOOL_ID",payload:l})},h=W.L.map(e=>{let t=o.installedPlugins.some(t=>t.id===e.id);return{...e,isInstalled:t}}),g=h.filter(e=>e.isInstalled||x.includes(e.id));return(0,l.jsxs)("div",{className:"flex flex-row items-center justify-between md:justify-start",children:[(0,l.jsx)("label",{className:"mr-2 text-left text-sm text-neutral-700 dark:text-neutral-300",children:e("Plugins")}),(0,l.jsx)("div",{className:"relative w-fit rounded-lg border border-neutral-200 bg-transparent pr-1 text-neutral-900 focus:outline-none dark:border-neutral-500 dark:text-white",children:(0,l.jsx)("select",{className:"cursor-pointer bg-transparent p-2 focus:outline-none",value:t||"none",onChange:e=>m(e.target.value),children:g.map((e,t)=>(0,l.jsx)("option",{value:e.value,disabled:e.isPremium&&!i,className:"flex font-sans disabled:text-neutral-500 dark:bg-[#343541] dark:text-white",children:e.selectorName},t))})}),(0,l.jsx)(W.Z,{isOpen:d,setIsOpen:u,pluginsData:h,installPlugin:e=>{if(o.installedPlugins.some(t=>t.id===e.id)){alert("This plugin is already installed.");return}if(o.installedPlugins.length>=7){alert("You can only install up to 7 plugins.");return}c({type:"INSTALL_PLUGIN",payload:{...e,isInstalled:!0}})},uninstallPlugin:e=>{if(!o.installedPlugins.some(t=>t.id===e)){alert("This plugin is not installed.");return}c({type:"UNINSTALL_PLUGIN",payload:e})}})]})},K=()=>{let[e,t]=(0,n.useState)(!1),{t:a}=(0,M.$G)("search"),{state:{selectedToolId:r,selectedConversation:i},dispatch:o}=(0,n.useContext)(I.ZP),{isPremium:c}=(0,T.X)(),d=R.IV.WEBSEARCH;return(0,n.useEffect)(()=>{(null==i?void 0:i.model.id)!==s.GPT_4&&r===d&&(t(!1),o({type:"SET_SELECTED_TOOL_ID",payload:null}))},[null==i?void 0:i.model.id,r,o]),(0,n.useEffect)(()=>{!r&&e?o({type:"SET_SELECTED_TOOL_ID",payload:d}):r!==d||e||o({type:"SET_SELECTED_TOOL_ID",payload:null})},[e,r,o]),(0,l.jsxs)("div",{className:"flex w-full flex-row items-center justify-between md:justify-start",children:[(0,l.jsx)("label",{className:"mr-2 text-left text-sm text-neutral-700 dark:text-neutral-300",children:a("Search Web")}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{id:"search-toggle",type:"checkbox",className:"sr-only",checked:e,onChange:()=>{if(r&&r!==d){alert(a('Cannot enable "Search Web" feature while another plugin is selected.'));return}if(!c){alert(a('The "Search Web" feature is available only for Plus users.'));return}if((null==i?void 0:i.model.id)!==s.GPT_4){alert(a('The "Search Web" feature is only available with the GPT-4 model.'));return}t(!e)}}),(0,l.jsx)("label",{htmlFor:"search-toggle",className:"block h-6 w-12 rounded-full transition-colors duration-200 ".concat(e?"bg-blue-500":"bg-[#555]")}),(0,l.jsx)("span",{className:"absolute left-1 top-1 h-4 w-4 transform rounded-full bg-white transition-transform ".concat(e?"translate-x-6":"")})]})]})},$=()=>{let{t:e}=(0,M.$G)("enhance search"),[t,a]=(0,n.useState)(!0),{state:{selectedToolId:r,selectedConversation:i},dispatch:o}=(0,n.useContext)(I.ZP),c=R.IV.ENHANCEDSEARCH;return(0,n.useEffect)(()=>{t&&(null==i?void 0:i.model.id)!==s.GPT_4?r!==c&&o({type:"SET_SELECTED_TOOL_ID",payload:c}):r===c&&o({type:"SET_SELECTED_TOOL_ID",payload:null})},[t,r,i,o]),(0,l.jsxs)("div",{className:"flex w-full flex-row items-center justify-between md:justify-start",children:[(0,l.jsx)("label",{className:"mr-2 text-left text-sm text-neutral-700 dark:text-neutral-300",children:e("Enhance Search")}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{id:"search-toggle",type:"checkbox",className:"sr-only",checked:t,onChange:()=>{if(r&&r!==c){alert(e('Cannot enable "Enhance Search" feature while another plugin is selected.'));return}a(!t)}}),(0,l.jsx)("label",{htmlFor:"search-toggle",className:"block h-6 w-12 rounded-full transition-colors duration-200 ".concat(t?"bg-blue-500":"bg-[#555]")}),(0,l.jsx)("span",{className:"absolute left-1 top-1 h-4 w-4 transform rounded-full bg-white transition-transform ".concat(t?"translate-x-6":"")})]})]})},J=a(45697),Y=a.n(J);let V=(0,n.forwardRef)((e,t)=>{let{isFocused:a,setIsFocused:r}=e,{state:{messageIsStreaming:i,selectedConversation:o}}=(0,n.useContext)(I.ZP),c=(0,n.useMemo)(()=>a&&!i,[a,i]),[d,u]=(0,n.useState)(!1),[x,m]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{c?(u(!0),setTimeout(()=>{m(!0)},1)):(m(!1),setTimeout(()=>{u(!1)},1))},[c]),(0,l.jsx)("div",{ref:t,className:"absolute left-0 z-10 h-fit w-full\n          -translate-y-[100%] overflow-hidden rounded-md border \n          bg-white text-black shadow-[0_0_10px_rgba(0,0,0,0.10)]\n          transition-all ease-in-out dark:border-gray-900/50 dark:bg-hgpt-chat-gray\n          dark:text-white dark:shadow-[0_0_15px_rgba(0,0,0,0.10)] ".concat(x?"-top-2 opacity-95":"top-8 opacity-0"),style:{display:d?"flex":"none"},children:(0,l.jsxs)("div",{className:"relative flex w-full flex-col px-4 py-2",children:[(0,l.jsx)("div",{className:"mobile:!flex-col mb-2 flex w-full flex-row items-center justify-start gap-4 border-b pb-2.5 dark:border-gray-900/50",children:(null==o?void 0:o.model.id)===s.GPT_4?(0,l.jsx)(K,{}):(0,l.jsx)($,{})}),(0,l.jsx)("div",{className:"flex w-full flex-col justify-between md:flex-row",children:(0,l.jsx)(B,{})})]})})});V.propTypes={isFocused:Y().bool.isRequired,setIsFocused:Y().func.isRequired},V.displayName="EnhancedMenu";let X=e=>{let{prompt:t,variables:a,onSubmit:r,onClose:s}=e,[i,o]=(0,n.useState)(a.map(e=>({key:e,value:""})).filter((e,t,a)=>a.findIndex(t=>t.key===e.key)===t)),c=(0,n.useRef)(null),d=(0,n.useRef)(null),u=(e,t)=>{o(a=>{let r=[...a];return r[e].value=t,r})},x=()=>{if(i.some(e=>""===e.value)){alert("Please fill out all variables");return}r(i.map(e=>e.value)),s()};return(0,n.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&s()};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}},[s]),(0,n.useEffect)(()=>{d.current&&d.current.focus()},[]),(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key&&s():(e.preventDefault(),x())},children:(0,l.jsxs)("div",{ref:c,className:"dark:border-netural-400 inline-block max-h-[400px] transform overflow-y-auto rounded-lg border border-gray-300 bg-white px-4 pb-4 pt-5 text-left align-bottom shadow-xl transition-all dark:bg-hgpt-dark-gray sm:my-8 sm:max-h-[600px] sm:w-full sm:max-w-lg sm:p-6 sm:align-middle",role:"dialog",children:[(0,l.jsx)("div",{className:"mb-4 text-xl font-bold text-black dark:text-neutral-200",children:t.name}),(0,l.jsx)("div",{className:"mb-4 text-sm italic text-black dark:text-neutral-200",children:t.description}),i.map((e,t)=>(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("div",{className:"mb-2 text-sm font-bold text-neutral-200",children:e.key}),(0,l.jsx)("textarea",{ref:0===t?d:void 0,className:"mt-1 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-hgpt-chat-gray dark:text-neutral-100",style:{resize:"none"},placeholder:"Enter a value for ".concat(e.key,"..."),value:e.value,onChange:e=>u(t,e.target.value),rows:3})]},t)),(0,l.jsx)("button",{className:"mt-6 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow hover:bg-neutral-100 focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-white dark:text-black dark:hover:bg-neutral-300",onClick:x,children:"Submit"})]})})},q=e=>{var t;let{onSend:a,onRegenerate:r,onScrollDownClick:s,stopConversationRef:i,textareaRef:c,showScrollDownButton:d}=e,{t:u}=(0,o.$G)("chat"),{state:{selectedConversation:x,messageIsStreaming:m,prompts:h,currentMessage:g,selectedToolId:p},dispatch:f}=(0,n.useContext)(I.ZP),[b,v]=(0,n.useState)(),[w,y]=(0,n.useState)(!1),[j,k]=(0,n.useState)(!1),[N,C]=(0,n.useState)(0),[S,E]=(0,n.useState)(""),[P,T]=(0,n.useState)([]),[z,Z]=(0,n.useState)(!1),[L,M]=(0,n.useState)(null),[R,W]=(0,n.useState)(!0),{isFocused:F,setIsFocused:B,menuRef:K}=H(c),$=(0,n.useRef)(null),J=U(K),Y=h.filter(e=>e.name.toLowerCase().includes(S.toLowerCase())),q=()=>{if(!m){if(!b){alert(u("Please enter a message"));return}a({role:"user",content:b},L),v(""),M(null),window.innerWidth<640&&c&&c.current&&c.current.blur()}},Q=()=>{let e=void 0===window.navigator?"":navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(e)},ee=()=>{let e=Y[N];e&&(v(t=>null==t?void 0:t.replace(/\/\w*$/,e.content)),er(e)),k(!1)},et=e=>{let t;let a=/{{(.*?)}}/g,r=[];for(;null!==(t=a.exec(e));)r.push(t[1]);return r},ea=(0,n.useCallback)(e=>{let t=e.match(/\/\w*$/);t?(k(!0),E(t[0].slice(1))):(k(!1),E(""))},[]),er=e=>{let t=et(e.content);T(t),t.length>0?Z(!0):(v(t=>null==t?void 0:t.replace(/\/\w*$/,e.content)),ea(e.content))};(0,n.useEffect)(()=>{$.current&&($.current.scrollTop=30*N)},[N]),(0,n.useEffect)(()=>{if(c&&c.current){var e,t;c.current.style.height="inherit",c.current.style.height="".concat(null===(e=c.current)||void 0===e?void 0:e.scrollHeight,"px"),c.current.style.overflow="".concat((null==c?void 0:null===(t=c.current)||void 0===t?void 0:t.scrollHeight)>400?"auto":"hidden")}f({field:"currentMessage",value:{...g,role:"user",content:b}})},[b]),(0,n.useEffect)(()=>{let e=e=>{$.current&&!$.current.contains(e.target)&&k(!1)};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}},[]);let es=window.innerWidth<=640;return(0,l.jsx)("div",{className:"absolute bottom-0 left-0 w-full border-transparent bg-gradient-to-b from-transparent via-white to-white pt-6 dark:border-white/20 dark:via-[#343541] dark:to-[#343541] md:pt-2",children:(0,l.jsxs)("div",{className:" ".concat("none"===J?"mt-[1.5rem] md:mt-[3rem]":"mt-[8rem] md:mt-[9.5rem]"," stretch mx-2 mb-4 mt-4 flex flex-row gap-3 transition-all ease-in-out md:mx-4 md:last:mb-6 lg:mx-auto lg:max-w-3xl"),children:[!m&&x&&x.messages.length>0&&(0,l.jsxs)("button",{className:"absolute left-0 right-0 top-0 mx-auto mb-3 flex w-fit items-center gap-3 rounded border border-neutral-200 bg-white px-4 py-2 text-black hover:opacity-50 dark:border-neutral-600 dark:bg-hgpt-medium-gray dark:text-white md:mb-0 md:mt-2",onClick:r,children:[(0,l.jsx)(A.Z,{size:16})," ",u("Regenerate response")]}),(0,l.jsxs)("div",{className:"relative mx-2 flex w-full flex-grow flex-col rounded-md \n            border bg-white shadow-[0_0_10px_rgba(0,0,0,0.10)] \n            dark:bg-[#40414F] dark:text-white \n            dark:shadow-[0_0_15px_rgba(0,0,0,0.10)] sm:mx-4 \n            ".concat(null===p||"enhancedsearch"===p?"border-black/10 dark:border-gray-900/50":"border-blue-500 dark:border-blue-500","\n          "),children:[R&&(0,l.jsx)(V,{ref:K,isFocused:F,setIsFocused:B}),(0,l.jsxs)("div",{className:"flex items-start",children:[(0,l.jsx)("div",{className:"flex items-center pl-2 pt-2",children:(0,l.jsx)("button",{onClick:()=>{W(!R)},className:"rounded-sm p-1 ".concat(R?"text-hgpt-dark-gray dark:text-hgpt-hover-white":"text-zinc-500 dark:text-zinc-400"," cursor-default hover:text-hgpt-dark-gray hover:dark:text-hgpt-hover-white"),children:(0,l.jsx)(D.Z,{size:20})})}),(0,l.jsx)("textarea",{onFocus:()=>B(!0),ref:c,className:"m-0 w-full resize-none rounded-md bg-transparent p-0 py-3 pl-3 pr-8 text-black outline-none dark:text-white md:py-3 md:pl-3",style:{resize:"none",bottom:"".concat(null==c?void 0:null===(t=c.current)||void 0===t?void 0:t.scrollHeight,"px"),maxHeight:es?"200px":"400px",overflow:"".concat(c.current&&c.current.scrollHeight>400?"auto":"hidden")},placeholder:u("Type a message ...")||"",value:b,rows:1,onKeyUp:e=>y(e.nativeEvent.isComposing),onChange:e=>{let t=e.target.value,a=null==x?void 0:x.model.maxLength;if(a&&t.length>a){alert(u("Message limit is {{maxLength}} characters. You have entered {{valueLength}} characters.",{maxLength:a,valueLength:t.length}));return}v(t),ea(t)},onKeyDown:e=>{y(e.nativeEvent.isComposing),j?"ArrowDown"===e.key?(e.preventDefault(),C(e=>e<h.length-1?e+1:e)):"ArrowUp"===e.key?(e.preventDefault(),C(e=>e>0?e-1:e)):"Tab"===e.key?(e.preventDefault(),C(e=>e<h.length-1?e+1:0)):"Enter"===e.key?(e.preventDefault(),ee()):"Escape"===e.key?(e.preventDefault(),k(!1)):C(0):"Enter"!==e.key||w||Q()||e.shiftKey?"/"===e.key&&e.metaKey&&e.preventDefault():(e.preventDefault(),q())}})]}),(0,l.jsx)("button",{className:"absolute right-2 top-2 rounded-sm p-1 ".concat(m?"text-hgpt-dark-gray dark:text-hgpt-hover-white":"text-zinc-500 dark:text-zinc-400"," hover:text-hgpt-dark-gray hover:dark:text-hgpt-hover-white"),onClick:m?()=>{i.current=!0,setTimeout(()=>{i.current=!1},1e3)}:q,children:m?(0,l.jsx)(_.Z,{size:18}):(0,l.jsx)(G.Z,{size:18})}),d&&(0,l.jsx)("div",{className:"absolute bottom-12 right-0 lg:-right-10 lg:bottom-0",children:(0,l.jsx)("button",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-neutral-300 text-gray-800 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-neutral-200",onClick:s,children:(0,l.jsx)(O.Z,{size:18})})}),z&&(0,l.jsx)(X,{prompt:Y[N],variables:P,onSubmit:e=>{v(null==b?void 0:b.replace(/{{(.*?)}}/g,(t,a)=>e[P.indexOf(a)])),c&&c.current&&c.current.focus()},onClose:()=>Z(!1)})]})]})})};var Q=a(90553);let ee=()=>(0,l.jsx)("div",{className:"group border-b border-black/10 bg-gray-50 text-gray-800 dark:border-gray-900/50 dark:bg-hgpt-light-gray dark:text-gray-100",style:{overflowWrap:"anywhere"},children:(0,l.jsxs)("div",{className:"m-auto flex gap-4 p-4 text-base md:max-w-2xl md:gap-6 md:py-6 lg:max-w-2xl lg:px-0 xl:max-w-3xl",children:[(0,l.jsx)("div",{className:"min-w-[40px] items-end",children:(0,l.jsx)(Q.Z,{size:30})}),(0,l.jsx)("span",{className:"mt-1 animate-pulse cursor-default",children:"▍"})]})});var et=a(93766),ea=a(73935),er=a(11163);let es=async e=>{let t=await fetch("https://us-central1-hackergpt-6c79e.cloudfunctions.net/GetCryptoPaymentStatus",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}),a=await t.json(),r="";if(!a.status)return" There was an error fetching your payment status. Please reload the page or contact us. ".concat(JSON.stringify(a));if("trialing"===a.status)return null;if("active"===a.status){if(!a.ends_at)return null;r="Your subscription is active."}else"confirmation-pending"===a.status?r="Waiting for blockchain confirmation.":"payment-failed"===a.status?r="Blockchain confirmation failed. Please try again or contact support.":"expired"===a.status&&(r="Your subscription has expired.");if(a.ends_at){let e=new Date(a.ends_at).toLocaleDateString();"expired"===a.status?r+=" It expired on ".concat(e):"confirmation-pending"!==a.status&&(r+=" Your subscription will end on ".concat(e))}return r};var el=a(97283),en=a(25386),ei=a(37872),eo=a(25504),ec=e=>{let{isOpen:t,onClose:a,checkoutUrl:r}=e,s=(0,n.useRef)(null),i=(0,er.useRouter)(),[o,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),[x,m]=(0,n.useState)(null),[h,g]=(0,n.useState)(null),p=(0,z.Hk)(),f=(0,P.v0)(p).currentUser,b=async()=>{if(f)try{c(await f.getIdToken(!0))}catch(e){return}},v=async()=>{if(o){let e=await es(o);console.log(e),m(e)}};(0,n.useEffect)(()=>{b(),v(),w()},[t]);let w=async()=>{if(!o)return;let e="https://us-central1-hackergpt-6c79e.cloudfunctions.net/CreateCharge";if(!e)throw Error("Missing Coinbase Charge Url environment variable");let t=await fetch(e,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}}),{hosted_url:a}=await t.json();g(a)};return(0,l.jsx)(l.Fragment,{children:t?(0,ea.createPortal)((0,l.jsx)("div",{className:"inset-negative-5 fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,l.jsx)("div",{className:"fixed inset-0 z-10 overflow-hidden",children:(0,l.jsxs)("div",{className:"flex min-h-screen items-center justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0",children:[(0,l.jsx)("div",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"}),(0,l.jsxs)("div",{ref:s,className:"inline-block transform overflow-y-auto rounded-lg border border-gray-300 bg-hgpt-dark-gray px-4 pb-4 pt-5 text-left align-bottom shadow-xl sm:my-8 sm:w-full sm:max-w-3xl sm:p-6 sm:align-middle",role:"dialog",children:[(0,l.jsx)("div",{className:"absolute right-2 top-2 flex h-10 w-10 cursor-pointer items-center justify-center rounded-full",onClick:a,children:(0,l.jsx)(el.Z,{color:"gray",size:22,strokeWidth:2})}),(0,l.jsx)("div",{className:"flex items-center justify-between text-white",children:(0,l.jsxs)("div",{className:"text-md pb-4 font-bold",children:["Your Plan ",x&&": "+x]})}),(0,l.jsxs)("div",{className:"flex flex-col text-white sm:flex-row",children:[(0,l.jsxs)("div",{className:"mb-4 flex-1 rounded-lg bg-hgpt-dark-gray sm:mb-0",children:[(0,l.jsx)("h3",{className:"mb-2 text-lg font-bold",children:"Free plan"}),(0,l.jsx)("button",{className:"mb-4 w-full rounded bg-[#8e8ea0] px-4 py-2 text-hgpt-dark-gray",disabled:!0,children:"Your current plan"}),(0,l.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,l.jsx)("div",{className:"icon-container mr-2",children:(0,l.jsx)(en.Z,{color:"#8e8ea0",size:22,strokeWidth:2})}),(0,l.jsx)("div",{className:"text-container flex-1",children:(0,l.jsx)("p",{className:"overflow-hidden truncate whitespace-nowrap",children:"Access to our HackerGPT model"})})]}),(0,l.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,l.jsx)("div",{className:"icon-container mr-2",children:(0,l.jsx)(en.Z,{color:"#8e8ea0",size:22,strokeWidth:2})}),(0,l.jsx)("div",{className:"text-container",children:(0,l.jsx)("p",{children:"Regular model updates"})})]}),(0,l.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,l.jsx)("div",{className:"icon-container mr-2",children:(0,l.jsx)(en.Z,{color:"#8e8ea0",size:22,strokeWidth:2})}),(0,l.jsx)("div",{className:"text-container",children:(0,l.jsx)("p",{children:"Standard response speed"})})]})]}),(0,l.jsx)("div",{className:"mx-4 my-2 hidden w-px bg-gray-300 sm:block"}),(0,l.jsxs)("div",{className:"mb-4 flex-1 rounded-lg bg-hgpt-dark-gray sm:mb-0",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"mb-2 text-lg font-bold",children:"HackerGPT Plus"}),(0,l.jsx)("div",{className:"mb-2 text-lg text-[#8e8ea0]",children:"USD $20/mo"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-0 md:flex-row md:gap-2",children:[(0,l.jsxs)("button",{onClick:()=>{r&&i.push(r)},className:"mb-4 flex w-full flex-row items-center justify-center gap-y-3 rounded bg-green-600 px-4 py-2 text-sm font-bold text-white transition duration-200 hover:bg-green-700",children:[(0,l.jsx)(ei.Z,{color:"white",size:22,strokeWidth:2}),"Upgrade to Plus"]}),(0,l.jsxs)("button",{onClick:()=>{h&&h.startsWith("https://commerce.coinbase.com/pay")?window.open(h,"_blank"):u("Error creating payment link")},className:"mb-4 flex w-full flex-row items-center justify-center gap-y-3 rounded bg-orange-600 px-4 py-2 text-sm font-bold text-white transition duration-200 hover:bg-orange-700",children:[(0,l.jsx)(eo.Z,{color:"white",size:22,strokeWidth:2}),"Pay with Crypto"]})]}),d&&(0,l.jsx)("div",{className:"mb-2 text-red-500",children:d}),(0,l.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,l.jsx)("div",{className:"icon-container mr-2",children:(0,l.jsx)(en.Z,{color:"#43A047",size:22,strokeWidth:2})}),(0,l.jsx)("div",{className:"text-container flex-1",children:(0,l.jsx)("p",{className:"overflow-hidden truncate whitespace-nowrap",children:"Unlimited access to our HackerGPT model"})})]}),(0,l.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,l.jsx)("div",{className:"icon-container mr-2",children:(0,l.jsx)(en.Z,{color:"#43A047",size:22,strokeWidth:2})}),(0,l.jsx)("div",{className:"text-container",children:(0,l.jsx)("p",{children:"Access to GPT-4 Turbo model"})})]}),(0,l.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,l.jsx)("div",{className:"icon-container mr-2",children:(0,l.jsx)(en.Z,{color:"#43A047",size:22,strokeWidth:2})}),(0,l.jsx)("div",{className:"text-container",children:(0,l.jsx)("p",{children:"Access to additional tools like Subfinder, Katana, Web Browsing and more"})})]}),(0,l.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,l.jsx)("div",{className:"icon-container mr-2",children:(0,l.jsx)(en.Z,{color:"#43A047",size:22,strokeWidth:2})}),(0,l.jsx)("div",{className:"text-container flex-1",children:(0,l.jsx)("p",{className:"overflow-hidden truncate whitespace-nowrap",children:"Access to our HackerGPT API"})})]}),(0,l.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,l.jsx)("div",{className:"icon-container mr-2",children:(0,l.jsx)(en.Z,{color:"#43A047",size:22,strokeWidth:2})}),(0,l.jsx)("div",{className:"text-container",children:(0,l.jsx)("p",{children:"Faster response speed"})})]})]})]})]})]})})}),document.getElementById("__next")):null})};function ed(e){let[t,a]=(0,n.useState)(!1),{user:r,isPremium:s,checkoutUrl:i,loading:o}=(0,T.X)(),c={title:"",description:""};switch(e.moduleName){case"HackerGPT":c={title:"AI + Hacker Wisdom: Unbeatable Combo",feature:"Constantly updated with fresh hacker knowledge",description:"Available to Free and Plus users",extra:"Unlimited to Plus users",beta:!0};break;case"GPT-4":c={title:"Hacker's Dream AI",feature:"Ready for complex challenges",description:"Available exclusively to Plus users",extra:"Limit 40 messages / 3 hours",buttonText:"Upgrade to Plus"};break;default:c={title:"Unknown Module",description:"This module is not recognized."}}return(0,l.jsxs)("div",{className:"group/options shadow-xxs dark:shadow-xs mx-2 flex flex-col overflow-hidden rounded-xl border border-gray-100 bg-white text-left dark:border-gray-800 dark:bg-hgpt-dark-gray dark:text-gray-100 sm:mx-1",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2.5 whitespace-pre-line px-5 py-4 text-sm sm:text-base",children:[(0,l.jsx)("span",{className:"block text-gray-900 dark:text-white",children:c.title}),c.feature&&(0,l.jsx)("span",{className:"block text-xs text-gray-500",children:c.feature}),(0,l.jsx)("span",{className:"block text-xs text-gray-500",children:c.description}),c.extra&&(0,l.jsx)("span",{className:"block text-xs text-gray-500",children:c.extra})]}),c.buttonText&&r&&!s&&!o||c.beta?(0,l.jsxs)("div",{role:"group",className:"mb-1 max-h-[calc(100vh-300px)] overflow-auto border-t border-gray-200 text-sm dark:border-hgpt-medium-gray",children:[c.buttonText&&(0,l.jsx)("div",{className:"px-5 py-3",children:(0,l.jsx)("button",{className:"rounded bg-green-600 px-4 py-2 font-bold text-white transition duration-200 hover:bg-green-700",onClick:()=>{a(!0)},children:c.buttonText})}),c.beta&&(0,l.jsx)("div",{className:"px-5 py-3",children:(0,l.jsx)("span",{className:"py-0.25 rounded bg-blue-200 px-1 text-sm font-bold capitalize text-blue-500",children:"beta"})})]}):null,(0,l.jsx)("div",{className:"z-50",children:(0,l.jsx)(ec,{isOpen:t,onClose:()=>{a(!1)},checkoutUrl:i})})]})}let eu=()=>{var e;let{t}=(0,o.$G)("chat"),[a,r]=(0,n.useState)(!1),[s,i]=(0,n.useState)(null),c=(0,n.useRef)(null),{isPremium:d}=(0,T.X)(),u=e=>{if("Plugins"===e){C(!0);return}if(("GPT-4"===e||"Web Browsing (GPT-4)"===e)&&!d)return;let t=m.find(t=>t.name===e);t&&(E(t.id),b(t.id))},{state:{selectedConversation:x,models:m,defaultModelId:h},handleUpdateConversation:g,dispatch:p}=(0,n.useContext)(I.ZP),f=e=>{let t=m.find(t=>t.id===e.target.value);x&&g(x,{key:"model",value:t||null})},b=e=>{f({target:{value:e}})},v=e=>{null!==c.current&&clearTimeout(c.current),i(e),r(!0)},w=()=>{c.current=window.setTimeout(()=>{r(!1),i(null)},300)},{state:y,dispatch:j}=(0,F.g)(),[k,C]=(0,n.useState)(!1),[S,E]=(0,n.useState)((null==x?void 0:null===(e=x.model)||void 0===e?void 0:e.id)||h),P=W.L.map(e=>{let t=y.installedPlugins.some(t=>t.id===e.id);return{...e,isInstalled:t}});return(0,l.jsxs)("div",{className:"relative flex flex-col items-stretch justify-center gap-0 sm:items-center",children:[(0,l.jsx)("div",{className:"flex rounded-xl bg-gray-100 p-1 text-hgpt-medium-gray dark:bg-hgpt-dark-gray",children:(0,l.jsx)("ul",{className:"flex w-full list-none gap-1 sm:w-auto",children:m.sort((e,t)=>"HackerGPT"===e.name?-1:"HackerGPT"===t.name?1:"GPT-4"===e.name?-1:"GPT-4"===t.name?1:e.name.localeCompare(t.name)).map((e,t)=>(0,l.jsx)("li",{className:"group/toggle w-full",children:(0,l.jsx)("button",{type:"button","aria-haspopup":"menu","aria-expanded":"false","data-state":"closed",className:"w-full cursor-pointer ".concat(S===e.id?"rounded-lg border-black/10 bg-white text-gray-900 dark:bg-hgpt-medium-gray dark:text-gray-100":"border-transparent text-gray-500 hover:text-gray-800 hover:dark:text-gray-100"),onClick:()=>u(e.name),onMouseEnter:()=>v(e.name),onMouseLeave:w,children:(0,l.jsxs)("div",{className:"group/button relative flex w-full items-center justify-center gap-1 rounded-lg py-3 outline-none transition-opacity duration-100 sm:w-auto sm:min-w-[150px] md:gap-2 md:py-3",children:["HackerGPT"===e.name?(0,l.jsx)("div",{className:"pl-2",children:(0,l.jsx)(N.Z,{size:20})}):(0,l.jsx)("div",{className:"pl-2",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",className:"icon-sm group-hover/button:text-brand-purple transition-colors",width:"16",height:"16",children:(0,l.jsx)("path",{d:"M12.784 1.442a.8.8 0 0 0-1.569 0l-.191.953a.8.8 0 0 1-.628.628l-.953.19a.8.8 0 0 0 0 1.57l.953.19a.8.8 0 0 1 .628.629l.19.953a.8.8 0 0 0 1.57 0l.19-.953a.8.8 0 0 1 .629-.628l.953-.19a.8.8 0 0 0 0-1.57l-.953-.19a.8.8 0 0 1-.628-.629l-.19-.953h-.002ZM5.559 4.546a.8.8 0 0 0-1.519 0l-.546 1.64a.8.8 0 0 1-.507.507l-1.64.546a.8.8 0 0 0 0 1.519l1.64.547a.8.8 0 0 1 .507.505l.546 1.641a.8.8 0 0 0 1.519 0l.546-1.64a.8.8 0 0 1 .506-.507l1.641-.546a.8.8 0 0 0 0-1.519l-1.64-.546a.8.8 0 0 1-.507-.506L5.56 4.546Zm5.6 6.4a.8.8 0 0 0-1.519 0l-.147.44a.8.8 0 0 1-.505.507l-.441.146a.8.8 0 0 0 0 1.519l.44.146a.8.8 0 0 1 .507.506l.146.441a.8.8 0 0 0 1.519 0l.147-.44a.8.8 0 0 1 .506-.507l.44-.146a.8.8 0 0 0 0-1.519l-.44-.147a.8.8 0 0 1-.507-.505l-.146-.441Z",fill:"currentColor"})})}),(0,l.jsx)("span",{className:"truncate pr-1.5 text-sm font-medium md:pr-1.5",children:e.id===h?"".concat(e.name):e.name}),1===t&&!d&&(0,l.jsx)("div",{className:"pr-2",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"icon-sm group-hover/button:text-brand-purple -ml-2 ml-0.5 !text-gray-500 transition-colors group-hover/options:text-gray-500 sm:ml-0",width:"16",height:"16",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 00-5.25 5.25v3a3 3 0 00-3 3v6.75a3 3 0 003 3h10.5a3 3 0 003-3v-6.75a3 3 0 00-3-3v-3c0-2.9-2.35-5.25-5.25-5.25zm3.75 8.25v-3a3.75 3.75 0 10-7.5 0v3h7.5z",clipRule:"evenodd"})})})]})})},e.id))})}),(0,l.jsx)("div",{className:"mb-2 flex justify-center",children:(0,l.jsx)("button",{type:"button",className:"w-auto min-w-[150px] max-w-xs cursor-pointer rounded-b-xl bg-gray-100 text-gray-900 dark:bg-hgpt-dark-gray dark:text-gray-100",onClick:()=>{C(!0)},children:(0,l.jsxs)("div",{className:"flex items-center justify-center gap-1 py-2",children:[(0,l.jsx)(et.Z,{size:20,className:"pl-1"}),(0,l.jsx)("span",{className:"truncate pr-1.5 text-sm font-medium",children:"Plugin Store"})]})})}),a&&(0,l.jsx)("div",{onMouseEnter:()=>{null!==c.current&&clearTimeout(c.current)},onMouseLeave:()=>{c.current=window.setTimeout(()=>{r(!1),i(null)},300)},children:(0,l.jsx)(ed,{moduleName:s})}),k&&(0,l.jsx)(W.Z,{isOpen:k,setIsOpen:C,pluginsData:P,installPlugin:e=>{if(y.installedPlugins.some(t=>t.id===e.id)){alert("This plugin is already installed.");return}if(y.installedPlugins.length>=7){alert("You can only install up to 7 plugins.");return}j({type:"INSTALL_PLUGIN",payload:{...e,isInstalled:!0}})},uninstallPlugin:e=>{if(!y.installedPlugins.some(t=>t.id===e)){alert("This plugin is not installed.");return}j({type:"UNINSTALL_PLUGIN",payload:e})}})]})};var ex=a(8861),em=a(21942),eh=a(74075),eg=a(88198),ep=a(93625),ef=a(67828),eb=a(80335),ev=a(93179),ew=a(84283);let ey={javascript:".js",python:".py",java:".java",c:".c",cpp:".cpp","c++":".cpp","c#":".cs",ruby:".rb",php:".php",swift:".swift","objective-c":".m",kotlin:".kt",typescript:".ts",go:".go",perl:".pl",rust:".rs",scala:".scala",haskell:".hs",lua:".lua",shell:".sh",sql:".sql",html:".html",css:".css"},ej=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="ABCDEFGHJKLMNPQRSTUVWXY3456789",r="";for(let t=0;t<e;t++)r+=a.charAt(Math.floor(Math.random()*a.length));return t?r.toLowerCase():r},ek=(0,n.memo)(e=>{let{language:t,value:a}=e,{t:r}=(0,o.$G)("markdown"),[s,i]=(0,n.useState)(!1);return(0,l.jsxs)("div",{className:"codeblock relative font-sans text-[16px]",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-4 py-1.5",children:[(0,l.jsx)("span",{className:"text-xs lowercase text-white",children:t}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("button",{className:"flex items-center gap-1.5 rounded bg-none p-1 text-xs text-white",onClick:()=>{navigator.clipboard&&navigator.clipboard.writeText&&navigator.clipboard.writeText(a).then(()=>{i(!0),setTimeout(()=>{i(!1)},2e3)})},children:[s?(0,l.jsx)(eg.Z,{size:18}):(0,l.jsx)(ef.Z,{size:18}),s?r("Copied!"):r("Copy code")]}),(0,l.jsx)("button",{className:"flex items-center rounded bg-none p-1 text-xs text-white",onClick:()=>{let e=ey[t]||".file",s="file-".concat(ej(3,!0)).concat(e),l=window.prompt(r("Enter file name")||"",s);if(!l)return;let n=new Blob([a],{type:"text/plain"}),i=URL.createObjectURL(n),o=document.createElement("a");o.download=l,o.href=i,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)},children:(0,l.jsx)(eb.Z,{size:18})})]})]}),(0,l.jsx)(ev.Z,{language:t,style:ew.vk,customStyle:{margin:0},children:a})]})});ek.displayName="CodeBlock";var eN=a(89313);let eC=(0,n.memo)(eN.D,(e,t)=>e.children===t.children);var eS=a(75390),eE=a(76199);let eP=(0,n.memo)(e=>{var t;let{message:a,messageIndex:r,onEdit:s}=e,{t:i}=(0,o.$G)("chat"),{state:{selectedConversation:c,conversations:d,currentMessage:u,messageIsStreaming:x},dispatch:m}=(0,n.useContext)(I.ZP),[h,g]=(0,n.useState)(!1),[p,f]=(0,n.useState)(!1),[v,w]=(0,n.useState)(a.content),[y,j]=(0,n.useState)(!1),k=(0,n.useRef)(null),N=()=>{a.content!=v&&c&&s&&s({...a,content:v}),g(!1)};return(0,n.useEffect)(()=>{w(a.content)},[a.content]),(0,n.useEffect)(()=>{k.current&&(k.current.style.height="inherit",k.current.style.height="".concat(k.current.scrollHeight,"px"))},[h]),(0,l.jsx)("div",{className:"group md:px-4 ".concat("assistant"===a.role?"border-b border-black/10 bg-gray-50 text-gray-800 dark:border-gray-900/50 dark:bg-hgpt-light-gray dark:text-gray-100":"border-b border-black/10 bg-white text-gray-800 dark:border-gray-900/50 dark:bg-hgpt-medium-gray dark:text-gray-100"),style:{overflowWrap:"anywhere"},children:(0,l.jsxs)("div",{className:"relative m-auto flex p-4 text-base md:max-w-2xl md:gap-6 md:py-6 lg:max-w-2xl lg:px-0 xl:max-w-3xl",children:[(0,l.jsx)("div",{className:"min-w-[40px] text-right font-bold",children:"assistant"===a.role?(0,l.jsx)(Q.Z,{size:30}):(0,l.jsx)(ex.Z,{size:30})}),(0,l.jsx)("div",{className:"prose mt-[-2px] w-full dark:prose-invert",children:"user"===a.role?(0,l.jsxs)("div",{className:"flex w-full",children:[h?(0,l.jsxs)("div",{className:"flex w-full flex-col",children:[(0,l.jsx)("textarea",{ref:k,className:"w-full resize-none whitespace-pre-wrap border-none dark:bg-hgpt-medium-gray",value:v,onChange:e=>{w(e.target.value),k.current&&(k.current.style.height="inherit",k.current.style.height="".concat(k.current.scrollHeight,"px"))},onKeyDown:e=>{"Enter"!==e.key||p||e.shiftKey||(e.preventDefault(),N())},onCompositionStart:()=>f(!0),onCompositionEnd:()=>f(!1),style:{fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",padding:"0",margin:"0",overflow:"hidden"}}),(0,l.jsxs)("div",{className:"mt-10 flex justify-center space-x-4",children:[(0,l.jsx)("button",{className:"h-[40px] rounded-md bg-blue-500 px-4 py-1 text-sm font-medium text-white enabled:hover:bg-blue-600 disabled:opacity-50",onClick:N,disabled:v.trim().length<=0,children:i("Save & Submit")}),(0,l.jsx)("button",{className:"h-[40px] rounded-md border border-neutral-300 px-4 py-1 text-sm font-medium text-neutral-700 hover:bg-neutral-100 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-800",onClick:()=>{w(a.content),g(!1)},children:i("Cancel")})]})]}):(0,l.jsx)("div",{className:"prose flex-1 whitespace-pre-wrap dark:prose-invert",children:a.content}),!h&&(0,l.jsxs)("div",{className:"ml-1 flex flex-col items-center justify-end gap-4 md:-mr-8 md:ml-0 md:flex-row md:items-start md:justify-start md:gap-1",children:[(0,l.jsx)("button",{className:"invisible text-gray-500 hover:text-gray-700 focus:visible group-hover:visible dark:text-gray-400 dark:hover:text-gray-300",onClick:()=>{g(!h)},children:(0,l.jsx)(em.Z,{size:20})}),(0,l.jsx)("button",{className:"invisible text-gray-500 hover:text-gray-700 focus:visible group-hover:visible dark:text-gray-400 dark:hover:text-gray-300",onClick:()=>{if(!c)return;let{messages:e}=c,t=e.findIndex(e=>e===a);if(t<0)return;t<e.length-1&&"assistant"===e[t+1].role?e.splice(t,2):e.splice(t,1);let{single:r,all:s}=b({...c,messages:e},d);m({field:"selectedConversation",value:r}),m({field:"conversations",value:s})},children:(0,l.jsx)(eh.Z,{size:20})})]})]}):(0,l.jsxs)("div",{className:"flex flex-row",children:[(0,l.jsx)(eC,{className:"prose flex-1 dark:prose-invert",remarkPlugins:[eE.Z,eS.Z],rehypePlugins:[eS.Z],components:{code(e){let{node:t,inline:a,className:r,children:s,...n}=e;if(s.length){if("▍"==s[0])return(0,l.jsx)("span",{className:"mt-1 animate-pulse cursor-default",children:"▍"});s[0]=s[0].replace("`▍`","▍")}let i=/language-(\w+)/.exec(r||"");return a?(0,l.jsx)("code",{className:r,...n,children:s}):(0,l.jsx)(ek,{language:i&&i[1]||"",value:String(s).replace(/\n$/,""),...n},Math.random())},table(e){let{children:t}=e;return(0,l.jsx)("table",{className:"border-collapse border border-black px-3 py-1 dark:border-white",children:t})},th(e){let{children:t}=e;return(0,l.jsx)("th",{className:"break-words border border-black bg-gray-500 px-3 py-1 text-white dark:border-white",children:t})},td(e){let{children:t}=e;return(0,l.jsx)("td",{className:"break-words border border-black px-3 py-1 dark:border-white",children:t})}},children:"".concat(a.content).concat(x&&r==(null!==(t=null==c?void 0:c.messages.length)&&void 0!==t?t:0)-1?"`▍`":"")}),(0,l.jsx)("div",{className:"ml-1 flex flex-col items-center justify-end gap-4 md:-mr-8 md:ml-0 md:flex-row md:items-start md:justify-start md:gap-1",children:y?(0,l.jsx)(eg.Z,{size:20,className:"text-green-500 dark:text-green-400"}):(0,l.jsx)("button",{className:"invisible text-gray-500 hover:text-gray-700 focus:visible group-hover:visible dark:text-gray-400 dark:hover:text-gray-300",onClick:()=>{navigator.clipboard&&navigator.clipboard.writeText(a.content).then(()=>{j(!0),setTimeout(()=>{j(!1)},2e3)})},children:(0,l.jsx)(ep.Z,{size:20})})})]})})]})})});eP.displayName="ChatMessage";let eT=(0,n.memo)(eP,(e,t)=>e.message.content===t.message.content),ez=(0,n.memo)(e=>{var t;let a,r,{stopConversationRef:s}=e,{t:i}=(0,o.$G)("chat"),{state:{selectedToolId:c,selectedConversation:d,conversations:u,models:x,apiKey:m,serverSideApiKeyIsSet:h,messageIsStreaming:g,modelError:p,loading:f},handleUpdateConversation:y,dispatch:j}=(0,n.useContext)(I.ZP),[k,A]=(0,n.useState)(),[D,_]=(0,n.useState)(!0),[G,O]=(0,n.useState)(!1),[H,U]=(0,n.useState)(!1),M=(0,n.useRef)(null),R=(0,n.useRef)(null),W=(0,n.useRef)(null),F=(0,n.useCallback)(async function(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=$.currentUser,n=[];if(l)try{t=await l.getIdToken(!0)}catch(e){S.ZP.error("Unable to generate Auth token");return}else if(n.push(e),n.push({role:"assistant",content:"\n        \n\uD83D\uDED1 **Whoa, hold on a sec!** \n        \n\uD83D\uDD13 **Ready to chat?** \n        \n* All you need to do is **SIGN UP** or **LOG IN** now. \n        \n\uD83E\uDD16 **So what are you waiting for?** \n        \n* We've got a lot to talk about!\n        "}),d){j({field:"selectedConversation",value:{...d,messages:[...d.messages,...n]}});return}if(d){let l,n;if(a){let t=[...d.messages];for(let e=0;e<a;e++)t.pop();l={...d,messages:[...t,e]}}else l={...d,messages:[...d.messages,e]};j({field:"selectedConversation",value:l}),j({field:"loading",value:!0}),j({field:"messageIsStreaming",value:!0});let i={model:l.model.id,messages:l.messages,toolId:c};n=r?JSON.stringify({...i}):JSON.stringify(i);let o=new AbortController,x=Z(r),m=await fetch(x,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},signal:o.signal,body:n});if(!m.ok){j({field:"loading",value:!1}),j({field:"messageIsStreaming",value:!1}),S.ZP.error(m.statusText);return}let h=m.body;if(!h){j({field:"loading",value:!1}),j({field:"messageIsStreaming",value:!1});return}if(r){let{answer:e}=await m.json(),t=[...l.messages,{role:"assistant",content:e}];l={...l,messages:t},j({field:"selectedConversation",value:b}),v(l);let a=u.map(e=>e.id===d.id?l:e);0===a.length&&a.push(l),j({field:"conversations",value:a}),w(a),j({field:"loading",value:!1}),j({field:"messageIsStreaming",value:!1})}else{if(1===l.messages.length){let{content:t}=e,a=t.length>30?t.substring(0,30)+"...":t;l={...l,name:a}}j({field:"loading",value:!1});let t=h.getReader(),a=new TextDecoder,r=!1,n=!0,i="";for(;!r;){if(!0===s.current){o.abort(),r=!0;break}let{value:e,done:c}=await t.read();r=c;let d=a.decode(e);if(i+=d,n){n=!1;let e=[...l.messages,{role:"assistant",content:d}];j({field:"selectedConversation",value:l={...l,messages:e}})}else{let e=l.messages.map((e,t)=>t===l.messages.length-1?{...e,content:i}:e);j({field:"selectedConversation",value:l={...l,messages:e}})}}v(l);let c=u.map(e=>e.id===d.id?l:e);0===c.length&&c.push(l),j({field:"conversations",value:c}),w(c),j({field:"messageIsStreaming",value:!1})}}},[m,u,d,s,c]),{isPremium:B}=(0,T.X)(),K=(0,z.Hk)(),$=(0,P.v0)(K);(0,n.useCallback)(()=>{if(D){var e,t;null===(e=M.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),null===(t=W.current)||void 0===t||t.focus()}},[D]);let J=(t=()=>{if(D){var e;null===(e=M.current)||void 0===e||e.scrollIntoView(!0)}},function(){for(var e=arguments.length,s=Array(e),l=0;l<e;l++)s[l]=arguments[l];r?(clearTimeout(a),a=setTimeout(()=>{Date.now()-r>=250&&(t(...s),r=Date.now())},250-(Date.now()-r))):(t(...s),r=Date.now())});(0,n.useEffect)(()=>{J(),d&&A(d.messages[d.messages.length-2])},[d,J]),(0,n.useEffect)(()=>{let e=new IntersectionObserver(e=>{let[t]=e;if(_(t.isIntersecting),t.isIntersecting){var a;null===(a=W.current)||void 0===a||a.focus()}},{root:null,threshold:.5}),t=M.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},[M]);let Y=null==d?void 0:d.model;return(0,l.jsx)("div",{className:"relative flex-1 overflow-hidden bg-white dark:bg-hgpt-medium-gray",children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"max-h-full overflow-x-hidden",ref:R,onScroll:()=>{if(R.current){let{scrollTop:e,scrollHeight:t,clientHeight:a}=R.current;e+a<t-30?(_(!1),U(!0)):(_(!0),U(!1))}},children:(null==d?void 0:d.messages.length)===0?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"mx-auto flex flex-col space-y-5 px-3 pt-5 sm:max-w-[600px] md:space-y-12 md:pt-6",children:[(0,l.jsx)("div",{className:"z-10",children:x.length>0&&(0,l.jsx)(eu,{})}),(0,l.jsx)("div",{className:"absolute inset-x-0 top-[15rem] mb-10 ml-auto mr-auto flex flex flex flex-grow items-center justify-center gap-2 text-center sm:top-[17.5rem] sm:mb-16",children:0===x.length?(0,l.jsx)(L,{size:"18px",className:"mx-auto"}):(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 text-center",children:[(0,l.jsx)("div",{className:"sm:hidden",children:(0,l.jsx)(E,{scale:.25})}),(0,l.jsx)("div",{className:"hidden sm:block",children:(0,l.jsx)(E,{scale:.45})}),(0,l.jsx)("div",{className:"hidden text-3xl font-semibold text-[#0a0a0a] dark:text-[#fafafa] sm:block",children:"HackerGPT"})]})})]})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"sticky top-0 z-10 flex flex-1 flex-grow items-center justify-center gap-2 border border-b-neutral-300 bg-neutral-100 py-5 text-sm text-neutral-500 dark:border-none dark:bg-hgpt-light-gray dark:text-neutral-200 sm:justify-center",children:Y&&(0,l.jsxs)(l.Fragment,{children:["HackerGPT"===Y.name?(0,l.jsx)(N.Z,{size:20}):"Web Browsing (GPT-4)"===Y.name?(0,l.jsx)(C.Z,{size:20}):(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",className:"icon-sm group-hover/button:text-brand-purple transition-colors",width:"16",height:"16",children:(0,l.jsx)("path",{d:"M12.784 1.442a.8.8 0 0 0-1.569 0l-.191.953a.8.8 0 0 1-.628.628l-.953.19a.8.8 0 0 0 0 1.57l.953.19a.8.8 0 0 1 .628.629l.19.953a.8.8 0 0 0 1.57 0l.19-.953a.8.8 0 0 1 .629-.628l.953-.19a.8.8 0 0 0 0-1.57l-.953-.19a.8.8 0 0 1-.628-.629l-.19-.953h-.002ZM5.559 4.546a.8.8 0 0 0-1.519 0l-.546 1.64a.8.8 0 0 1-.507.507l-1.64.546a.8.8 0 0 0 0 1.519l1.64.547a.8.8 0 0 1 .507.505l.546 1.641a.8.8 0 0 0 1.519 0l.546-1.64a.8.8 0 0 1 .506-.507l1.641-.546a.8.8 0 0 0 0-1.519l-1.64-.546a.8.8 0 0 1-.507-.506L5.56 4.546Zm5.6 6.4a.8.8 0 0 0-1.519 0l-.147.44a.8.8 0 0 1-.505.507l-.441.146a.8.8 0 0 0 0 1.519l.44.146a.8.8 0 0 1 .507.506l.146.441a.8.8 0 0 0 1.519 0l.147-.44a.8.8 0 0 1 .506-.507l.44-.146a.8.8 0 0 0 0-1.519l-.44-.147a.8.8 0 0 1-.507-.505l-.146-.441Z",fill:"currentColor"})}),Y.name]})}),G&&(0,l.jsx)("div",{className:"flex flex-col space-y-10 md:mx-auto md:max-w-xl md:gap-6 md:py-3 md:pt-6 lg:max-w-2xl lg:px-0 xl:max-w-3xl",children:(0,l.jsx)(eu,{})}),null==d?void 0:d.messages.map((e,t)=>(0,l.jsx)(eT,{message:e,messageIndex:t,onEdit:e=>{A(e),F(e,(null==d?void 0:d.messages.length)-t)}},t)),f&&(0,l.jsx)(ee,{}),(0,l.jsx)("div",{className:"h-[162px] bg-white dark:bg-hgpt-medium-gray",ref:M})]})}),(0,l.jsx)(q,{stopConversationRef:s,textareaRef:W,onSend:(e,t)=>{A(e),F(e,0,t)},onScrollDownClick:()=>{var e;null===(e=R.current)||void 0===e||e.scrollTo({top:R.current.scrollHeight,behavior:"smooth"})},onRegenerate:()=>{k&&F(k,2,null)},showScrollDownButton:H})]})})});ez.displayName="Chat";var eI=a(13499),eZ=a(10614),eL=a(11417),eA=a(17010),eD=a(3742),e_=a(35336),eG=a(17645),eO=a(79062);let eH=e=>{let[t,a]=(0,n.useState)(!1),{dispatch:r}=(0,n.useContext)(I.ZP)||{};(0,n.useEffect)(()=>{let e=(0,P.v0)(),t=(0,P.Aj)(e,e=>{a(!!e)});return()=>t()},[]);let s=()=>{r({field:"conversations",value:[]}),r({field:"selectedConversation",value:null}),localStorage.removeItem("conversations"),localStorage.removeItem("selectedConversation"),window.location.reload()};return{isUserLoggedIn:t,handleLogOut:()=>{let t=(0,P.v0)();(0,P.w7)(t).then(()=>{a(!1),s(),e&&e()}).catch(e=>{console.error("Error during sign out:",e)})}}};var eU=a(39332),eM=a(20373);let eR=e=>{var t;let{open:a,onClose:r}=e,{t:s}=(0,o.$G)("settings"),i=j(),{state:c,dispatch:d}=(0,u.L)({initialState:i}),{dispatch:x}=(0,n.useContext)(I.ZP),m=(0,n.useRef)(null),{isUserLoggedIn:h,handleLogOut:g}=eH(),p=(0,eU.useRouter)(),[f,b]=(0,n.useState)(!1),[v,w]=(0,n.useState)(null),[y,N]=(0,n.useState)(null),[C,S]=(0,n.useState)(!0),E=(0,z.Hk)(),T=(0,P.v0)(E),Z=[{name:"General",icon:(0,l.jsx)(D.Z,{size:22,strokeWidth:2}),isProtected:!1},{name:"API keys",icon:(0,l.jsx)(e_.Z,{size:22,strokeWidth:2}),isProtected:!0}],[L,A]=(0,n.useState)(Z[0].name),[_,G]=(0,n.useState)(!1),[O,H]=(0,n.useState)(""),[U,M]=(0,n.useState)(""),[R,W]=(0,n.useState)(!1),[F,B]=(0,n.useState)([]),[K,$]=(0,n.useState)(!1),[J,Y]=(0,n.useState)(!1),[V,X]=(0,n.useState)(!1),[q,Q]=(0,n.useState)(""),[ee,et]=(0,n.useState)(!1),[ea,er]=(0,n.useState)(""),[en,ei]=(0,n.useState)(!1),[eo,ec]=(0,n.useState)(null),ed=async()=>{if(!T.currentUser){Q("User not authenticated"),et(!1);return}$(!0),et(!0),Q("");try{var e;let t=await (null===(e=T.currentUser)||void 0===e?void 0:e.getIdToken()),a=await fetch("".concat("https://us-central1-hackergpt-6c79e.cloudfunctions.net/createApiKey"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({keyName:U})});if(!a.ok){let e=await a.text()||"Error code: ".concat(a.status);return Q("Error creating API key: ".concat(e)),et(!1),$(!1),!1}let r=await a.json(),s=new Date(r.created).toLocaleString();return H(r.key),G(!0),W(!0),B(e=>[...e,{...r,created:s}]),$(!1),!0}catch(e){e instanceof Error?Q("Failed to create key: "+e.message):Q("Failed to create key: An unknown error occurred")}finally{return et(!1),$(!1),!1}},eu=async e=>{if(!T.currentUser){er("User not authenticated"),ei(!1);return}if(!e){er("Key ID is required"),ei(!1);return}Y(!0),ei(!0),er("");try{var t;let a=await (null===(t=T.currentUser)||void 0===t?void 0:t.getIdToken()),r=await fetch("".concat("https://us-central1-hackergpt-6c79e.cloudfunctions.net/deleteApiKey"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({keyId:e})});if(!r.ok){let e=await r.text()||"Error code: ".concat(r.status);return er("Error deleting API key: ".concat(e)),ei(!1),Y(!1),!1}return await r.json(),B(t=>t.filter(t=>t.id!==e)),ei(!1),Y(!1),!0}catch(e){return e instanceof Error?er("Failed to delete key: "+e.message):er("Failed to delete key: An unknown error occurred"),ei(!1),Y(!1),!1}},ex=async()=>{if(!T.currentUser){console.error("User not authenticated"),X(!1);return}X(!0);try{var e;let t=await (null===(e=T.currentUser)||void 0===e?void 0:e.getIdToken()),a=await fetch("".concat("https://us-central1-hackergpt-6c79e.cloudfunctions.net/fetchUserApiKeys"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(!a.ok){try{let e=await a.text()||"Error code: ".concat(a.status);console.error("Error fetching user API keys: ".concat(e)),X(!1)}catch(e){console.error("Error fetching user API keys:, status code: ".concat(a.status)),X(!1)}return}let r=await a.json();return X(!1),r}catch(e){return console.error("Error fetching user API keys:",e),X(!1),[]}};(0,n.useEffect)(()=>{let e=async()=>{"API keys"===L&&f&&B(await ex())};eg(),ep(),e()},[L,f]);let em=async()=>{let e=!!T.currentUser&&await (0,eG.Q)(E);if(b(e),e&&h)try{let e=await (0,eO.a)(E);w(e)}catch(e){console.error("Error pre-fetching portal URL:",e)}},eg=async()=>{if(T.currentUser)try{ec(await T.currentUser.getIdToken(!0))}catch(e){return null}},ep=async()=>{eo&&(N(await es(eo)||null),S(!1))};(0,n.useEffect)(()=>{em(),eg(),ep()},[E,null===(t=T.currentUser)||void 0===t?void 0:t.uid,h]),(0,n.useEffect)(()=>{let e=e=>{m.current&&!m.current.contains(e.target)&&window.addEventListener("mouseup",t)},t=e=>{window.removeEventListener("mouseup",t),r()};return window.addEventListener("mousedown",e),()=>{window.removeEventListener("mousedown",e)}},[r]),(0,n.useEffect)(()=>{x({field:"lightMode",value:c.theme}),k(c)},[c.theme]);let[ef,eb]=(0,n.useState)(!1),[ev,ew]=(0,n.useState)(""),[ey,ej]=(0,n.useState)(""),ek=(e,t)=>{ew(e),ej(t),er(""),eb(!0)},eN=async()=>{ev&&await eu(ev)&&eb(!1)};return a?(0,l.jsx)("div",{className:"inset-negative-5 fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,l.jsx)("div",{className:"fixed inset-0 z-10 overflow-hidden",children:(0,l.jsxs)("div",{className:"flex min-h-screen items-center justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0",children:[(0,l.jsx)("div",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"}),(0,l.jsxs)("div",{ref:m,className:"inline-block max-h-[80%] w-11/12 transform overflow-y-auto rounded-lg border border-gray-300 bg-white pb-4 pt-5 text-left align-bottom shadow-xl transition-all dark:border-neutral-400 dark:bg-hgpt-dark-gray sm:my-8 sm:max-h-[600px] sm:w-full sm:max-w-3xl sm:p-2 sm:align-middle",role:"dialog",children:[(0,l.jsxs)("div",{className:"px-4 pt-5 text-black dark:text-neutral-200",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"text-xl font-bold",children:s("Settings")}),(0,l.jsx)("button",{onClick:r,children:(0,l.jsx)(el.Z,{color:"gray",size:22,strokeWidth:2})})]}),(0,l.jsx)("hr",{className:"my-4 border-hgpt-chat-gray dark:border-white"})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-col",children:[(0,l.jsx)("div",{children:(0,l.jsx)("nav",{className:"flex justify-center","aria-label":"Sidebar",children:Z.map(e=>!e.isProtected||e.isProtected&&h?(0,l.jsxs)("button",{onClick:()=>A(e.name),className:"mb-2 mr-2 inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium sm:mb-2 sm:mr-0 sm:justify-start ".concat(L===e.name?"bg-hgpt-hover-white text-black dark:bg-hgpt-chat-gray dark:text-neutral-200":"text-black hover:bg-gray-100 dark:text-neutral-200 dark:hover:bg-gray-700"),children:[e.icon,(0,l.jsx)("span",{className:"ml-2",children:e.name})]},e.name):null)})}),(0,l.jsxs)("div",{className:"w-full p-6",children:["General"===L&&(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"mb-2 text-sm font-bold text-black dark:text-neutral-200",children:s("Theme")}),(0,l.jsx)("div",{className:"w-full rounded-lg border border-neutral-200 bg-transparent pr-1 text-neutral-900 focus:outline-none dark:border-neutral-500 dark:text-white",children:(0,l.jsxs)("select",{className:"w-full cursor-pointer bg-transparent p-2 text-neutral-700 focus:outline-none dark:text-neutral-200",value:c.theme,onChange:e=>d({field:"theme",value:e.target.value}),children:[(0,l.jsx)("option",{className:"font-sans dark:bg-[#343541] dark:text-white",value:"dark",children:s("Dark mode")}),(0,l.jsx)("option",{className:"font-sans dark:bg-[#343541] dark:text-white",value:"light",children:s("Light mode")})]})}),C?(0,l.jsx)("div",{className:"flex justify-center py-4",children:(0,l.jsx)(eM.Z,{size:30,color:"white"})}):(0,l.jsxs)(l.Fragment,{children:[f&&h&&!y&&(0,l.jsx)("button",{type:"button",className:"mt-6 w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-black shadow hover:bg-hgpt-hover-white dark:bg-hgpt-dark-gray dark:text-white dark:hover:bg-hgpt-medium-gray",onClick:()=>{v?p.push(v):(async()=>{try{let e=await (0,eO.a)(E);p.push(e)}catch(e){console.error("Error fetching portal URL:",e)}})()},children:(0,l.jsx)("span",{children:"Manage Subscription"})}),y&&h?(0,l.jsxs)("div",{className:"mt-5",children:[(0,l.jsx)("b",{className:"mb-2 text-sm font-bold text-black dark:text-neutral-200",children:"Subscription"}),(0,l.jsx)("p",{className:"text-black dark:text-neutral-200",children:y})]}):null]}),h?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("button",{type:"button",className:"mt-6 w-full rounded-lg border border-red-700 bg-red-600 px-4 py-2 text-white shadow hover:bg-red-500 focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-red-700 dark:text-white dark:hover:bg-red-500",onClick:g,children:"Log Out"})}):null]}),"API keys"===L&&(0,l.jsx)("div",{children:f&&h?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"text-left",children:[(0,l.jsx)("p",{className:"mb-4 text-black dark:text-white",children:"Your secret API keys are listed below. Please note that we do not display your secret API keys again after you generate them."}),(0,l.jsx)("p",{className:"mb-4 text-black dark:text-white",children:"Do not share your API key with others, or expose it in the browser or other client-side code."}),(0,l.jsxs)("p",{className:"mb-4 text-black dark:text-white",children:["Check our"," ",(0,l.jsx)("a",{href:"https://hackergpt.gitbook.io/chat/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600",children:"API documentation"})," ","for guidance."]})]}),V?(0,l.jsx)("div",{className:"flex justify-center py-4",children:(0,l.jsx)(eM.Z,{size:30,color:"white"})}):(null==F?void 0:F.length)>0?(0,l.jsx)("div",{className:"mb-4 overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-center",children:[(0,l.jsx)("thead",{className:"bg-white dark:bg-hgpt-dark-gray",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 text-xs font-bold uppercase tracking-wider text-black dark:text-white",children:"Name"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 text-xs font-bold uppercase tracking-wider text-black dark:text-white",children:"Key"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 text-xs font-bold uppercase tracking-wider text-black dark:text-white",children:"Created"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 text-xs font-bold uppercase tracking-wider text-black dark:text-white",children:"Last Used"}),(0,l.jsx)("th",{scope:"col",className:"px-2 py-3 text-xs font-bold uppercase tracking-wider text-black dark:text-white"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white text-center dark:bg-hgpt-dark-gray",children:F.map((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"whitespace-nowrap px-4 py-4 text-sm text-black dark:text-white",children:e.keyName.length>15?"".concat(e.keyName.substring(0,15),"..."):e.keyName}),(0,l.jsx)("td",{className:"whitespace-nowrap px-4 py-4 text-sm text-black dark:text-white",children:e.censoredKey}),(0,l.jsx)("td",{className:"whitespace-nowrap px-4 py-4 text-sm text-black dark:text-white",children:e.created?new Date(e.created).toLocaleDateString():"Never"}),(0,l.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-black dark:text-white",children:e.lastUsed?new Date(e.lastUsed).toLocaleDateString():"Never"}),(0,l.jsx)("td",{className:"whitespace-nowrap px-4 py-4 text-sm font-medium",children:(0,l.jsx)("button",{onClick:()=>ek(e.id,e.censoredKey),className:"text-black hover:text-hgpt-chat-gray dark:text-white dark:hover:text-hgpt-hover-white",children:(0,l.jsx)(eh.Z,{size:18,strokeWidth:2})})})]},t))})]})}):(0,l.jsx)("div",{className:"py-4 text-center",children:"No API keys found."}),(0,l.jsx)("button",{type:"button",className:"mt-4 w-full rounded-lg bg-blue-500 px-4 py-2 text-white shadow hover:bg-blue-600 focus:outline-none",onClick:()=>{Q(""),G(!0)},children:"Create New Secret Key"})]}):(0,l.jsx)("div",{className:"text-black dark:text-white",children:"To use the HackerGPT API with your app and create API keys, you need to have a Plus Subscription."})}),_&&(0,l.jsx)("div",{className:"z-60 fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,l.jsx)("div",{className:"m-4 mx-auto max-w-lg rounded bg-white p-6 shadow dark:bg-hgpt-dark-gray",children:(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)("div",{className:"mb-4 flex w-full items-center justify-between",children:[(0,l.jsx)("h2",{className:"text-lg font-bold text-black dark:text-white",children:"Create an API Key"}),(0,l.jsx)("button",{onClick:()=>{G(!1),W(!1),M("")},children:(0,l.jsx)(el.Z,{color:"gray",size:22,strokeWidth:2})})]}),R?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h2",{className:"mb-2 self-start text-sm text-black dark:text-white",children:"Your new key:"})," ",(0,l.jsx)("p",{className:"mb-4 w-full rounded bg-hgpt-light-gray p-2 text-white dark:bg-hgpt-medium-gray",children:O}),(0,l.jsx)("p",{className:"mb-4 self-start text-sm text-black dark:text-white",children:"Please copy it now and write it down somewhere safe. You will not be able to see it again."})," ",(0,l.jsx)("button",{className:"w-full rounded bg-blue-500 px-4 py-2 text-white",onClick:()=>{G(!1),W(!1)},children:"Done"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h2",{className:"mb-2 text-sm text-black dark:text-white",children:"Name your key"}),(0,l.jsx)("input",{type:"text",placeholder:"My Test Key",value:U,onChange:e=>M(e.target.value),className:"mb-4 w-full rounded bg-hgpt-light-gray p-2 text-white dark:bg-hgpt-medium-gray"}),q&&(0,l.jsx)("div",{className:"mb-4 rounded bg-red-100 p-2 text-sm text-red-700",children:q}),(0,l.jsx)("button",{className:"mt-4 w-full rounded bg-blue-500 px-4 py-2 text-white",onClick:ed,disabled:!U||ee||K,children:K?(0,l.jsx)(eM.Z,{size:20,color:"white"}):"Create"})]})]})})}),ef&&(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,l.jsx)("div",{className:"m-4 mx-auto max-w-sm rounded-lg bg-white p-6 dark:bg-hgpt-dark-gray",children:(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("h3",{className:"mb-4 text-lg font-bold text-black dark:text-white",children:"Revoke secret key"}),(0,l.jsx)("p",{className:"mb-4 text-sm text-black dark:text-white",children:"This API key will immediately be disabled. API requests made using this key will be rejected, which could cause any systems still depending on it to break. Once revoked, you'll no longer be able to view or modify this API key."}),(0,l.jsx)("div",{className:"mb-4 w-full rounded bg-hgpt-light-gray p-2 text-white dark:bg-hgpt-medium-gray",children:ey}),ea&&(0,l.jsx)("div",{className:"mb-4 rounded bg-red-100 p-2 text-sm text-red-700",children:ea}),(0,l.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,l.jsx)("button",{className:"rounded bg-gray-300 px-4 py-2 text-black hover:bg-gray-400 dark:bg-gray-600 dark:text-white dark:hover:bg-gray-700",onClick:()=>eb(!1),children:"Cancel"}),(0,l.jsx)("button",{className:"rounded bg-red-600 px-4 py-2 text-white hover:bg-red-700",onClick:eN,disabled:en||J,children:J?(0,l.jsx)(eM.Z,{size:20,color:"white"}):"Revoke key"})]})]})})})]})]})]})]})})}):null},eW=e=>{let{text:t="",className:a="",icon:r,suffixIcon:s,onClick:n}=e;return(0,l.jsxs)("button",{className:"flex w-full cursor-pointer select-none items-center justify-between rounded-md px-3 py-3 text-[14px] leading-3 text-white transition-colors duration-200 hover:bg-gray-500/10 ".concat(a),onClick:n,children:[(0,l.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,l.jsx)("div",{children:r}),t&&(0,l.jsx)("span",{children:t})]}),s&&(0,l.jsx)("span",{children:s})]})},eF=(0,n.createContext)(void 0),eB=e=>{let{onClearConversations:t}=e,[a,r]=(0,n.useState)(!1),{t:s}=(0,o.$G)("sidebar"),i=()=>{t(),r(!1)};return a?(0,l.jsxs)("div",{className:"flex w-full cursor-pointer items-center rounded-lg px-3 py-3 hover:bg-gray-500/10",children:[(0,l.jsx)(eh.Z,{size:18}),(0,l.jsx)("div",{className:"ml-3 flex-1 text-left text-[12.5px] leading-3 text-white",children:s("Are you sure?")}),(0,l.jsxs)("div",{className:"flex w-[40px]",children:[(0,l.jsx)(eg.Z,{className:"ml-auto mr-1 min-w-[20px] text-neutral-400 hover:text-neutral-100",size:18,onClick:e=>{e.stopPropagation(),i()}}),(0,l.jsx)(el.Z,{className:"ml-auto min-w-[20px] text-neutral-400 hover:text-neutral-100",size:18,onClick:e=>{e.stopPropagation(),r(!1)}})]})]}):(0,l.jsx)(eW,{text:s("Clear all chats"),icon:(0,l.jsx)(eh.Z,{size:18}),onClick:()=>r(!0)})};var eK=a(3600),e$=a(62042),eJ=e=>{let{isOpen:t,onClose:a}=e,[r,s]=(0,n.useState)(null),[i,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[u,x]=(0,n.useState)(!1),[m,h]=(0,n.useState)(!1),[g,p]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=z.ZP.auth().onAuthStateChanged(e=>{s(e||null)});return()=>{e()}},[]);let f=()=>{a()},b=async()=>{let e=new z.ZP.auth.GoogleAuthProvider;try{await z.ZP.auth().signInWithPopup(e),o(null),f()}catch(e){o("An error occurred. Please try again.")}},v=async e=>{let t={url:window.location.origin,handleCodeInApp:!0};try{await z.ZP.auth().sendSignInLinkToEmail(e,t),d(null),x(!0),window.localStorage.setItem("emailForSignIn",e)}catch(e){switch(e.code){case"auth/invalid-email":d("Invalid email address. Please enter a valid email.");break;case"auth/network-request-failed":d("Network error. Please check your internet connection and try again.");break;default:d("An error occurred. Please try again later.")}}};return(0,l.jsxs)("div",{className:"inset-negative-5 fixed inset-0 z-50 flex items-center justify-center overflow-y-auto ".concat(t?"block":"hidden"),children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-black opacity-30"}),(0,l.jsxs)("div",{className:"relative z-50 m-auto w-full max-w-md overflow-hidden rounded-lg border border-gray-300 bg-white text-white dark:bg-hgpt-dark-gray",children:[(0,l.jsx)("div",{className:"absolute right-2 top-2 flex h-10 w-10 cursor-pointer items-center justify-center",onClick:a,children:(0,l.jsx)(el.Z,{color:"gray",size:22,strokeWidth:2})}),(0,l.jsxs)("div",{className:"p-6 pb-2 pt-12",children:[(0,l.jsxs)("div",{className:"flex w-full flex-col items-center justify-center space-y-4 p-8 pb-2 pt-2",children:[(0,l.jsx)("h1",{className:"pb-4 pt-2 text-3xl font-bold text-black dark:text-white",children:m?"Create Your Account":"Welcome Back"}),(0,l.jsxs)("button",{onClick:b,className:"flex w-full items-center justify-center rounded border border-gray-300 bg-white px-4 py-2 text-lg text-black hover:bg-hgpt-hover-white dark:bg-hgpt-dark-gray dark:text-white dark:hover:bg-hgpt-medium-gray",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-brand-google mr-2",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,l.jsx)("path",{d:"M17.788 5.108a9 9 0 1 0 3.212 6.892h-8"})]}),m?"Sign up with Google":"Log in with Google"]}),(0,l.jsxs)("button",{onClick:function(){let e=new z.ZP.auth.TwitterAuthProvider;z.ZP.auth().signInWithPopup(e).then(e=>{e.credential&&(e.credential,f())}).catch(e=>{console.error(e)})},className:"flex w-full items-center justify-center rounded border border-gray-300 bg-white px-4 py-2 text-lg text-black hover:bg-hgpt-hover-white dark:bg-hgpt-dark-gray dark:text-white dark:hover:bg-hgpt-medium-gray",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-brand-x mr-2",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,l.jsx)("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),(0,l.jsx)("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),m?"Sign up with Twitter / X":"Log in with Twitter / X"]}),(0,l.jsx)("span",{className:"mx-4 text-black dark:text-white",children:"OR"}),(0,l.jsx)("input",{type:"email",value:g,onChange:e=>p(e.target.value),placeholder:"Email address",className:"flex w-full items-center justify-center rounded border border-gray-300 bg-white px-4 py-2 text-lg text-black hover:bg-hgpt-hover-white dark:bg-hgpt-dark-gray dark:text-white dark:hover:bg-hgpt-medium-gray"}),c&&(0,l.jsxs)("div",{className:"flex items-center justify-center text-center text-xs text-red-500 ",children:[(0,l.jsx)(eK.Z,{size:18,className:"mr-2"}),c]}),u&&(0,l.jsxs)("div",{className:"flex items-center justify-center text-center text-xs text-green-500 ",children:[(0,l.jsx)(e$.Z,{size:18,className:"mr-2"}),"Email link sent successfully!"]}),(0,l.jsx)("button",{onClick:()=>v(g),className:"flex w-full items-center justify-center rounded border border-gray-300 bg-white px-4 py-2 text-lg text-black hover:bg-hgpt-hover-white dark:bg-hgpt-dark-gray dark:text-white dark:hover:bg-hgpt-medium-gray",children:m?"Sign up with Email Link":"Log in with Email Link"}),(0,l.jsxs)("div",{className:"mt-2 flex items-center justify-center text-center text-sm text-black dark:text-white",children:[(0,l.jsx)(eK.Z,{size:18,className:"mr-2"}),"No free messages with Email Link method."]})]}),i&&(0,l.jsxs)("div",{className:"flex items-center justify-center py-2 pb-2 text-center text-xs text-red-500",children:[(0,l.jsx)(eK.Z,{size:18,className:"mr-2"}),i]})]}),(0,l.jsxs)("div",{className:"pb-2 pt-2 text-center text-xs text-black dark:text-white",children:["By using HackerGPT, you agree to our"," ",(0,l.jsx)("a",{href:"/terms-and-conditions",target:"_blank",className:"font-semibold underline",children:"Terms of Use"}),"."]}),(0,l.jsx)("div",{className:"flex justify-center p-6 pb-5 pt-6",children:m?(0,l.jsxs)("button",{onClick:()=>{h(!1),o("")},className:"text-black dark:text-white",children:["Already have an account?"," ",(0,l.jsx)("span",{className:"font-semibold",children:"Log in"})]}):(0,l.jsxs)("button",{onClick:()=>{h(!0),o("")},className:"text-black dark:text-white",children:["Don't have an account?"," ",(0,l.jsx)("span",{className:"font-semibold",children:"Sign up"})]})})]})]})};let eY=()=>{let{t:e}=(0,o.$G)("sidebar"),[t,a]=(0,n.useState)(!1),[r,s]=(0,n.useState)(!1),{user:i,isPremium:c,checkoutUrl:d,loading:u}=(0,T.X)(),{state:{conversations:x},dispatch:m}=(0,n.useContext)(I.ZP),{handleClearConversations:h}=(0,n.useContext)(eF),[g,p]=(0,n.useState)(!1),f=(null==i?void 0:i.displayName)||((null==i?void 0:i.email)?i.email.split("@")[0]:null);return(0,l.jsxs)("div",{className:"",children:[x.length>0?(0,l.jsx)(eB,{onClearConversations:h}):null,(0,l.jsxs)("div",{className:"flex flex-col items-center space-y-1 border-t border-white/20 pt-1 text-sm",children:[f?(0,l.jsxs)(l.Fragment,{children:[i&&!c&&!u&&(0,l.jsx)(eW,{text:e("Upgrade to Plus"),icon:(0,l.jsx)(ei.Z,{size:18}),onClick:()=>{s(!0)}}),(0,l.jsx)(ec,{isOpen:r,onClose:()=>{s(!1)},checkoutUrl:d}),(0,l.jsx)(eW,{icon:(0,l.jsx)(eI.Z,{size:18}),text:f,suffixIcon:(0,l.jsx)(eZ.Z,{size:18,strokeWidth:1.5}),onClick:()=>a(!0)})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eW,{text:e("Settings"),icon:(0,l.jsx)(D.Z,{size:18}),onClick:()=>a(!0)}),(0,l.jsx)(eW,{text:e("Log in"),icon:(0,l.jsx)(eL.Z,{size:18}),onClick:()=>{p(!0)}})]}),(0,l.jsxs)("div",{className:"flex w-full",children:[(0,l.jsx)(eW,{className:"flex-grow",text:e("About us"),icon:(0,l.jsx)(eA.Z,{size:18}),onClick:()=>{window.open("/about-us","_blank")}}),(0,l.jsx)(eW,{className:"w-min",icon:(0,l.jsx)(eD.Z,{size:18}),onClick:()=>{window.open("https://github.com/Hacker-GPT/HackerGPT","_blank")}}),(0,l.jsx)(eW,{className:"w-min",icon:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-brand-x",width:"18",height:"18",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,l.jsx)("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),(0,l.jsx)("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),onClick:()=>{window.open("https://twitter.com/thehackergpt","_blank")}})]}),(0,l.jsx)(eR,{open:t,onClose:()=>{a(!1)}}),g&&(0,l.jsx)(eJ,{isOpen:g,onClose:()=>{p(!1)}})]})]})};var eV=a(47447),eX=a(30471),eq=e=>{let{handleClick:t,children:a}=e;return(0,l.jsx)("button",{className:"min-w-[20px] p-1 text-neutral-400 hover:text-neutral-100",onClick:t,children:a})};let eQ=e=>{let{conversation:t}=e,{state:{selectedConversation:a,messageIsStreaming:r},handleSelectConversation:s,handleUpdateConversation:i}=(0,n.useContext)(I.ZP),{handleDeleteConversation:o}=(0,n.useContext)(eF),[c,d]=(0,n.useState)(!1),[u,x]=(0,n.useState)(!1),[m,h]=(0,n.useState)(""),g=(e,t)=>{e.dataTransfer&&e.dataTransfer.setData("conversation",JSON.stringify(t))},p=e=>{m.trim().length>0&&(i(e,{key:"name",value:m}),h(""),x(!1))},[f,b]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=(0,P.v0)();return(0,P.Aj)(e,e=>{b((null==e?void 0:e.uid)||null)})},[]),(0,n.useEffect)(()=>{u?d(!1):c&&x(!1)},[u,c]),(0,l.jsxs)("div",{className:"relative flex items-center",children:[u&&(null==a?void 0:a.id)===t.id?(0,l.jsxs)("div",{className:"flex w-full items-center gap-3 rounded-lg bg-hgpt-medium-gray/90 p-3",children:[(0,l.jsx)(eV.Z,{size:18}),(0,l.jsx)("input",{className:"mr-12 flex-1 overflow-hidden overflow-ellipsis border-neutral-400 bg-transparent text-left text-[12.5px] leading-3 text-white outline-none focus:border-neutral-100",type:"text",value:m,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),a&&p(a))},autoFocus:!0})]}):(0,l.jsxs)("button",{className:"flex w-full cursor-pointer items-center gap-3 rounded-lg p-3 text-sm transition-colors duration-200 hover:bg-hgpt-medium-gray/90 ".concat(r?"disabled:cursor-not-allowed":""," ").concat((null==a?void 0:a.id)===t.id?"bg-hgpt-medium-gray/90":""),onClick:()=>s(t),disabled:r,draggable:"true",onDragStart:e=>g(e,t),children:[(0,l.jsx)(eV.Z,{size:18}),(0,l.jsx)("div",{className:"relative max-h-5 flex-1 overflow-hidden text-ellipsis whitespace-nowrap break-all text-left text-[12.5px] leading-3 ".concat((null==a?void 0:a.id)===t.id?"pr-12":"pr-1"),children:t.name})]}),(c||u)&&(null==a?void 0:a.id)===t.id&&(0,l.jsxs)("div",{className:"absolute right-1 z-10 flex text-gray-300",children:[(0,l.jsx)(eq,{handleClick:e=>{e.stopPropagation(),c?o(t):u&&p(t),d(!1),x(!1)},children:(0,l.jsx)(eg.Z,{size:18})}),(0,l.jsx)(eq,{handleClick:e=>{e.stopPropagation(),d(!1),x(!1)},children:(0,l.jsx)(el.Z,{size:18})})]}),(null==a?void 0:a.id)===t.id&&!c&&!u&&(0,l.jsxs)("div",{className:"absolute right-1 z-10 flex text-gray-300",children:[(0,l.jsx)(eq,{handleClick:e=>{e.stopPropagation(),x(!0),a&&h(a.name)},children:(0,l.jsx)(eX.Z,{size:18})}),(0,l.jsx)(eq,{handleClick:e=>{e.stopPropagation(),d(!0)},children:(0,l.jsx)(eh.Z,{size:18})})]})]})},e0=e=>{let{conversations:t}=e;return(0,l.jsx)("div",{className:"flex w-full flex-col gap-1",children:t.slice().reverse().map((e,t)=>(0,l.jsx)(eQ,{conversation:e},t))})};var e1=a(1177),e2=a(92005),e4=a(98963),e3=a(89014);let e5=e=>{let{onClick:t,side:a}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{className:"fixed top-5 ".concat("right"===a?"right-[270px]":"left-[270px]"," z-50 h-7 w-7 hover:text-gray-400 dark:text-white dark:hover:text-gray-300 sm:top-0.5 sm:").concat("right"===a?"right-[270px]":"left-[270px]"," sm:h-8 sm:w-8 sm:text-neutral-700"),onClick:t,children:"right"===a?(0,l.jsx)(e4.Z,{}):(0,l.jsx)(e3.Z,{})}),(0,l.jsx)("div",{onClick:t,className:"absolute left-0 top-0 z-20 h-full w-full bg-black opacity-70 sm:hidden"})]})},e8=e=>{let{onClick:t,side:a}=e;return(0,l.jsx)("button",{className:"fixed top-2.5 ".concat("right"===a?"right-2":"left-2"," z-50 h-7 w-7 text-white hover:text-gray-400 dark:text-white dark:hover:text-gray-300 sm:top-0.5 sm:").concat("right"===a?"right-2":"left-2"," sm:h-8 sm:w-8 sm:text-neutral-700"),onClick:t,children:"right"===a?(0,l.jsx)(e3.Z,{}):(0,l.jsx)(e4.Z,{})})};var e6=e=>{let{placeholder:t,searchTerm:a,onSearch:r}=e,{t:s}=(0,o.$G)("sidebar");return(0,l.jsxs)("div",{className:"relative flex items-center",children:[(0,l.jsx)("input",{className:"w-full flex-1 rounded-md border border-neutral-600 bg-[#202123] px-4 py-3 pr-10 text-[14px] leading-3 text-white",type:"text",placeholder:s(t)||"",value:a,onChange:e=>{r(e.target.value)}}),a&&(0,l.jsx)(el.Z,{className:"absolute right-4 cursor-pointer text-neutral-300 hover:text-neutral-400",size:18,onClick:()=>{r("")}})]})},e7=e=>{let{isOpen:t,addItemButtonTitle:a,side:r,items:s,itemComponent:n,folderComponent:i,footerComponent:o,searchTerm:c,handleSearchTerm:d,toggleOpen:u,handleCreateItem:x,handleDrop:m}=e,{t:h}=(0,M.$G)("promptbar");return t?(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"fixed top-0 ".concat(r,"-0 z-40 flex h-full w-[260px] flex-none flex-col space-y-2 bg-hgpt-dark-gray p-2 text-[14px] transition-all sm:relative sm:top-0"),children:[(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsxs)("button",{className:"text-sidebar flex w-[245px] flex-shrink-0 cursor-pointer select-none items-center gap-3 rounded-md border border-white/20 p-3 text-white transition-colors duration-200 hover:bg-gray-500/10",onClick:()=>{x(),d("")},children:[(0,l.jsx)(e1.Z,{size:16}),a]})}),(0,l.jsx)(e6,{placeholder:h("Search prompts...")||"",searchTerm:c,onSearch:d}),(0,l.jsxs)("div",{className:"flex-grow overflow-auto",children:[(null==s?void 0:s.length)>0&&(0,l.jsx)("div",{className:"flex border-b border-white/20 pb-2",children:i}),(null==s?void 0:s.length)>0?(0,l.jsx)("div",{className:"pt-2",onDrop:m,onDragOver:e=>{e.preventDefault()},onDragEnter:e=>{e.target.style.background="#343541"},onDragLeave:e=>{e.target.style.background="none"},children:n}):(0,l.jsxs)("div",{className:"mt-8 select-none text-center text-white opacity-50",children:[(0,l.jsx)(e2.Z,{className:"mx-auto mb-3"}),(0,l.jsx)("span",{className:"text-[14px] leading-normal",children:h("No data.")})]})]}),o]}),(0,l.jsx)(e5,{onClick:u,side:r})]}):(0,l.jsx)(e8,{onClick:u,side:r})};let e9={searchTerm:"",filteredConversations:[]};var te=a(57632);let tt=()=>{let{t:e}=(0,o.$G)("sidebar"),t=(0,u.L)({initialState:e9}),{state:{conversations:a,showChatbar:r,defaultModelId:s},dispatch:i,handleNewConversation:c,handleUpdateConversation:d}=(0,n.useContext)(I.ZP),{state:{searchTerm:x,filteredConversations:m},dispatch:h}=t;return(0,n.useEffect)(()=>{x?h({field:"filteredConversations",value:a.filter(e=>(e.name.toLocaleLowerCase()+" "+e.messages.map(e=>e.content).join(" ")).toLowerCase().includes(x.toLowerCase()))}):h({field:"filteredConversations",value:a})},[x,a]),(0,l.jsx)(eF.Provider,{value:{...t,handleDeleteConversation:t=>{let r=a.filter(e=>e.id!==t.id);i({field:"conversations",value:r}),h({field:"searchTerm",value:""}),w(r),r.length>0?(i({field:"selectedConversation",value:r[r.length-1]}),v(r[r.length-1])):(s&&i({field:"selectedConversation",value:{id:(0,te.Z)(),name:e("New Chat"),messages:[],model:g[s]}}),localStorage.removeItem("selectedConversation"))},handleClearConversations:()=>{s&&i({field:"selectedConversation",value:{id:(0,te.Z)(),name:e("New Chat"),messages:[],model:g[s]}}),i({field:"conversations",value:[]}),localStorage.removeItem("conversationHistory"),localStorage.removeItem("selectedConversation")}},children:(0,l.jsx)(e7,{side:"left",isOpen:r,addItemButtonTitle:e("New chat"),itemComponent:(0,l.jsx)(e0,{conversations:m}),items:m,toggleOpen:()=>{i({field:"showChatbar",value:!r}),localStorage.setItem("showChatbar",JSON.stringify(!r))},handleCreateItem:c,handleDrop:e=>{e.dataTransfer&&(d(JSON.parse(e.dataTransfer.getData("conversation")),{key:"folderId",value:0}),h({field:"searchTerm",value:""}),e.target.style.background="none")},searchTerm:x,handleSearchTerm:e=>h({field:"searchTerm",value:e}),footerComponent:(0,l.jsx)(eY,{}),folderComponent:void 0})})};var ta=a(17932);let tr=e=>{let{selectedConversation:t,onNewConversation:a}=e;return(0,l.jsxs)("nav",{className:"flex w-full items-center justify-between bg-hgpt-dark-gray px-4 py-3",children:[(0,l.jsx)("div",{className:"mr-4"}),(0,l.jsx)("div",{className:"flex-1 truncate text-center text-base font-normal",children:t.name}),(0,l.jsx)("div",{children:(0,l.jsx)(ta.Z,{className:"cursor-pointer hover:text-neutral-400",onClick:a})})]})};var ts=a(977),tl=e=>{let{serverSideApiKeyIsSet:t,serverSidePluginKeysSet:a,defaultModelId:r}=e,{t:s}=(0,o.$G)("chat"),{getModels:c}=h(),{getModelsError:m}=x(),[y,k]=(0,n.useState)(!0),N=(0,u.L)({initialState:ts.E}),{state:{apiKey:C,lightMode:S,conversations:E,selectedConversation:T},dispatch:z}=N,Z=(0,n.useRef)(!1),{data:L,error:A,refetch:D}=(0,i.useQuery)(["GetModels",C,t],e=>{let{signal:a}=e;return C||t?c():null},{enabled:!0,refetchOnMount:!1});(0,n.useEffect)(()=>{L&&z({field:"models",value:L})},[L,z]),(0,n.useEffect)(()=>{z({field:"modelError",value:m(A)})},[z,A,m]);let[_,G]=(0,n.useState)(!1),[O,H]=(0,n.useState)(!1),[U,M]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=(0,P.v0)(),t=(0,P.Aj)(e,t=>{if(t)M(t.uid),G(!1);else if(M(null),G(!0),(0,P.JB)(e,window.location.href)){let t=window.localStorage.getItem("emailForSignIn");t&&(0,P.P6)(e,t,window.location.href).then(()=>{window.localStorage.removeItem("emailForSignIn")}).catch(e=>{console.log("An error occurred. Please try again.")})}H(!0)});return()=>t()},[]);let R=()=>{let e=E[E.length-1],t={id:(0,te.Z)(),name:s("New Chat"),messages:[],model:(null==e?void 0:e.model)||{id:g[r].id,name:g[r].name,maxLength:g[r].maxLength,tokenLimit:g[r].tokenLimit}},a=[...E,t];z({field:"selectedConversation",value:t}),z({field:"conversations",value:a}),v(t),w(a),z({field:"loading",value:!1})};return(0,n.useEffect)(()=>{window.innerWidth<640&&z({field:"showChatbar",value:!1})},[T]),(0,n.useEffect)(()=>{r&&z({field:"defaultModelId",value:r}),t&&z({field:"serverSideApiKeyIsSet",value:t}),a&&z({field:"serverSidePluginKeysSet",value:a})},[r,t,a]),(0,n.useEffect)(()=>{let e=j();e.theme&&z({field:"lightMode",value:e.theme});let a=localStorage.getItem("apiKey");t?(z({field:"apiKey",value:""}),localStorage.removeItem("apiKey")):a&&z({field:"apiKey",value:a}),window.innerWidth<640&&(z({field:"showChatbar",value:!1}),z({field:"showPromptbar",value:!1}));let l=localStorage.getItem("showChatbar");l&&z({field:"showChatbar",value:"true"===l});let n=localStorage.getItem("conversationHistory");n&&z({field:"conversations",value:f(JSON.parse(n))});let i=localStorage.getItem("selectedConversation");i?z({field:"selectedConversation",value:p(JSON.parse(i))}):(E[E.length-1],z({field:"selectedConversation",value:{id:(0,te.Z)(),name:s("New Chat"),messages:[],model:g[r]}}))},[r,z,t,a]),(0,l.jsxs)(I.ZP.Provider,{value:{...N,handleNewConversation:R,handleSelectConversation:e=>{z({field:"selectedConversation",value:e}),v(e)},handleUpdateConversation:(e,t)=>{let{single:a,all:r}=b({...e,[t.key]:t.value},E);z({field:"selectedConversation",value:a}),z({field:"conversations",value:r})}},children:[(0,l.jsxs)(d(),{children:[(0,l.jsx)("title",{children:"HackerGPT"}),(0,l.jsx)("meta",{name:"description",content:"Unlock the power of HackerGPT, your AI ethical hacking assistant, trained extensively on hacking knowledge. Swiftly identify, exploit, and mitigate vulnerabilities using cutting-edge AI expertise in cybersecurity."}),(0,l.jsx)("meta",{name:"viewport",content:"height=device-height ,width=device-width, initial-scale=1, user-scalable=no"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,l.jsx)("div",{className:"dark",children:_&&(0,l.jsx)(eJ,{isOpen:_,onClose:()=>{G(!1)}})}),T&&(0,l.jsxs)("main",{className:"flex h-screen w-screen flex-col text-sm text-white dark:text-white ".concat(S),children:[(0,l.jsx)("div",{className:"fixed top-0 w-full sm:hidden",children:(0,l.jsx)(tr,{selectedConversation:T,onNewConversation:R})}),(0,l.jsxs)("div",{className:"flex h-full w-full pt-[44px] sm:pt-0",children:[(0,l.jsx)(tt,{}),(0,l.jsx)("div",{className:"flex flex-1",children:(0,l.jsx)(ez,{stopConversationRef:Z})})]})]})]})},tn=!0}},function(e){e.O(0,[743,888,774,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);